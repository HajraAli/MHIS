webpackJsonp([0],{1354:function(e,t,n){"use strict";function a(e){var t=e.major,n=e.minor;return e.snapshot?"master":t+"."+n}function r(e,t){var a=new Map([["objectType",t]]),r=new Map([["objectType",n.i(c.camelCaseToUnderscores)(t)]]),o=Object.keys(p.a).find(function(t){var n=i(t,a);return new RegExp(n).test(e)});return o&&p.a[o]?i(p.a[o],r):""}function i(e,t){var n=/\$\{(.+?)\}/g;return e.replace(n,function(e,n,a){return t.has(n)&&t.get(n)?t.get(n):".+?"})}function o(e,t){var n=e.schema,i=t.d2,o=window.location.hash.replace(/^#/,"").replace(/\?.+?$/,""),s="https://ci.dhis2.org/docs/"+a(i.system.version),u=r(o,n);return u?React.createElement(l.a,{href:""+s+u,target:"_blank",rel:"noopener noreferrer",tooltip:i.i18n.getTranslation("open_user_guide"),tooltipPosition:"bottom-center",iconClassName:"material-icons",iconStyle:{top:-2}},"help_outline"):null}t.a=o;var s=n(46),l=n.n(s),u=n(1355),p=n.n(u),c=n(293);n.n(c);o.contextTypes={d2:React.PropTypes.object}},1355:function(e,t){e.exports={"/edit/categorySection/categoryOptionGroupSet":"/en/user/html/manage_category.html#create_category_option_group_set","/edit/categorySection/categoryOptionGroup":"/en/user/html/manage_category.html#create_category_option_group","/edit/categorySection/categoryOptionCombo":"/en/user/html/manage_category.html#assign_code_category_option_combo","/edit/categorySection/categoryOption":"/en/user/html/manage_category.html#create_category_option","/edit/categorySection/categoryCombo":"/en/user/html/manage_category.html#create_category_combination","/edit/categorySection/category":"/en/user/html/manage_category.html#create_category","/list/categorySection":"/en/user/html/manage_category.html","/edit/dataElementSection/dataElementGroupSet":"/en/user/html/manage_data_element.html#create_data_element_group_set","/edit/dataElementSection/dataElementGroup":"/en/user/html/manage_data_element.html#create_data_element_group","/edit/dataElementSection/dataElement":"/en/user/html/manage_data_element.html#create_data_element","/list/dataElementSection":"/en/user/html/manage_data_element.html","/edit/dataSetSection/dataSet":"/en/user/html/manage_data_set.html#create_data_set","/list/dataSetSection/dataSet":"/en/user/html/manage_data_set.html","/edit/indicatorSection/indicatorGroupSet":"/en/user/html/manage_indicator.html#create_indicator_group_set","/edit/indicatorSection/indicatorGroup":"/en/user/html/manage_indicator.html#create_indicator_group","/edit/indicatorSection/indicatorType":"/en/user/html/manage_indicator.html#create_indicator_type","/edit/indicatorSection/indicator":"/en/user/html/manage_indicator.html#create_indicator","/list/indicatorSection":"/en/user/html/manage_indicator.html","/edit/organisationUnitSection/organisationUnitGroupSet":"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group_set","/edit/organisationUnitSection/organisationUnitGroup":"/en/user/html/manage_organisation_unit.html#create_organisation_unit_group","/edit/organisationUnitSection/organisationUnitLevel":"/en/user/html/manage_organisation_unit.html#name_organisation_unit_level","/edit/organisationUnitSection/organisationUnit":"/en/user/html/manage_organisation_unit.html#create_organisation_unit","/list/organisationUnitSection":"/en/user/html/manage_organisation_unit.html","/edit/programSection/trackedEntityAttributeGroup":"/en/user/html/manage_program_metadata.html#create_tracked_entity_attribute_group","/edit/programSection/trackedEntityAttribute":"/en/user/html/manage_program_metadata.html#create_tracked_entity_attribute","/edit/programSection/relationshipType":"/en/user/html/manage_program_metadata.html#create_relationship_type","/edit/programSection/trackedEntity":"/en/user/html/manage_program_metadata.html#create_tracked_entity","/list/programSection":"/en/user/html/manage_program_metadata.html","/edit/validationSection/validationNotificationTemplate":"/en/user/html/manage_validation_rule.html#create_validation_notification","/edit/validationSection/validationRuleGroup":"/en/user/html/manage_validation_rule.html#create_validation_rule_group","/edit/validationSection/validationRule":"/en/user/html/manage_validation_rule.html#create_validation_rule","/list/validationSection":"/en/user/html/manage_validation_rule.html","/edit/otherSection/legendSet":"/en/user/html/manage_legend.html#create_legend","/list/otherSection/legendSet":"/en/user/html/manage_legend.html","/edit/otherSection/pushAnalysis":"/en/user/html/manage_push_report.html#create_push_report","/list/otherSection/pushAnalysis":"/en/user/html/manage_push_report.html","/edit/otherSection/externalMapLayer":"/en/user/html/manage_external_maplayer.html#create_external_map_layer","/list/otherSection/externalMapLayer":"/en/user/html/manage_external_maplayer.html","/edit/otherSection/${objectType}":"/en/user/html/manage_${objectType}.html#create_${objectType}","/list/otherSection/${objectType}":"/en/user/html/manage_${objectType}.html"}},1356:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){var n=t.d2,r=e.isValid,i=e.isSaving,s=e.onClick,u=a(e,["isValid","isSaving","onClick"]),c=i?n.i18n.getTranslation("saving"):n.i18n.getTranslation("save");return o.a.createElement(l.a,p({},u,{primary:!0,onClick:s,label:c,disabled:i||!r}))}var i=n(0),o=n.n(i),s=n(116),l=n.n(s),u=n(33),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};r.propTypes={isSaving:o.a.PropTypes.bool,isValid:o.a.PropTypes.bool,onClick:o.a.PropTypes.func.isRequired},t.a=n.i(u.a)(r)},1358:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i={contextTypes:{d2:r.a.PropTypes.object.isRequired},getCurrentUser:function(){return this.context.d2.currentUser},getModelDefinitionByName:function(e){return this.context.d2.models[e]}};t.a=i},1366:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){var n=e.onClick,r=(e.isPristine,a(e,["onClick","isPristine"])),i=function(){p.a.getState()&&p.a.getState().dirty?confirm(t.d2.i18n.getTranslation("abandon_unsaved_changes"))&&n.apply(void 0,arguments):n.apply(void 0,arguments)};return o.a.createElement(l.a,c({},r,{onClick:i,secondary:p.a.getState()&&p.a.getState().dirty,label:t.d2.i18n.getTranslation("cancel")}))}var i=n(0),o=n.n(i),s=n(34),l=n.n(s),u=n(33),p=n(117),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};r.propTypes={onClick:o.a.PropTypes.func.isRequired},t.a=n.i(u.a)(r)},1367:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){var n=e.tooltip,r=e.onClick,i=a(e,["tooltip","onClick"]),s=function(){c.a.getState()&&c.a.getState().dirty?confirm(t.d2.i18n.getTranslation("abandon_unsaved_changes"))&&r.apply(void 0,arguments):r.apply(void 0,arguments)};return o.a.createElement(l.a,d({tooltip:n||t.d2.i18n.getTranslation("back"),tooltipPosition:"bottom-right",onClick:s},i,{iconClassName:"material-icons"}),"î—„")}var i=n(0),o=n.n(i),s=n(85),l=n.n(s),u=n(33),p=n(13),c=(n.n(p),n(117)),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};r.propTypes={tooltip:o.a.PropTypes.string},t.a=n.i(u.a)(r)},1368:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){var r=e.level,i=e.schema,s=e.children,m=e.groupName,f=a(e,["level","schema","children","groupName"]);return o.a.createElement(l.a,d({},f,{level:r||2}),o.a.createElement(p.a,{onClick:function(){return n.i(c.a)("/list/"+m+"/"+i)},iconStyle:{top:3}}),t.d2.i18n.getTranslation(s),i&&o.a.createElement(u.a,{schema:i}))}var i=n(0),o=n.n(i),s=n(33),l=n(150),u=n(1354),p=n(1367),c=n(101),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};r.propTypes={children:o.a.PropTypes.string,level:o.a.PropTypes.number},t.a=n.i(s.a)(r)},1371:function(e,t,n){"use strict";function a(e){var t={marginTop:"1rem"},n={marginRight:"1rem",width:"10rem"},a=s()(e.children)?e.children:[e.children];return i.a.createElement("div",{style:Object.assign(t,e.style)},a.map(function(e,t){return i.a.cloneElement(e,{style:n,key:t})}))}t.a=a;var r=n(0),i=n.n(r),o=n(86),s=n.n(o);a.propTypes={style:i.a.PropTypes.object,children:i.a.PropTypes.oneOfType([i.a.PropTypes.array,i.a.PropTypes.object]).isRequired,isFormValid:i.a.PropTypes.func}},1395:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(u.a,null))}function i(e,t){return e.map(function(e){return e.value}).find(function(e){return-1!==Array.from(t.indicatorGroups.values()).map(function(e){return e.id}).indexOf(e)})}var o=n(0),s=n.n(o),l=n(13),u=(n.n(l),n(83)),p=n(69),c=n(511);t.a=s.a.createClass({displayName:"DataIndicatorGroupsAssignment.component",propTypes:{source:s.a.PropTypes.object.isRequired},getInitialState:function(){return c.a.setState({indicatorGroupValues:{},remove:[],save:[]}),{indicatorGroupSets:null}},componentDidMount:function(){var e=this;n.i(l.getInstance)().then(function(e){return e.Api.getApi().get("indicatorGroupSets",{fields:"id,displayName,indicatorGroups[id,displayName]",filter:["compulsory:eq:true"],paging:!1})}).then(function(e){return e.indicatorGroupSets}).then(function(t){return e.setState({indicatorGroupSets:t})}),this.subscription=c.a.subscribe(function(){return e.forceUpdate()})},componentWillUnmount:function(){this.subscription&&this.subscription&&this.subscription.unsubscribe()},render:function(){var e=this;return this.state.indicatorGroupSets?s.a.createElement("div",null,this.state.indicatorGroupSets.map(function(t,n){var a=t.indicatorGroups.map(function(e){return{value:e.id,text:e.displayName}}),r=Object.prototype.hasOwnProperty.call(c.a.state.indicatorGroupValues,t.id)?c.a.state.indicatorGroupValues[t.id]:i(a,e.props.source);return s.a.createElement("div",{key:"dataIndicatorGroupAssignment"+n},s.a.createElement(p.a,{key:t.id,labelText:t.displayName,translateLabel:!1,options:a,value:r,onChange:e._updateGroupStatus.bind(e,t.id,i(a,e.props.source)),fullWidth:!0}))})):r()},_updateGroupStatus:function(e,t,n){this.props.source.dirty=!0,c.a.setState({indicatorGroupValues:Object.assign({},c.a.state.indicatorGroupValues,a({},e,n.target.value?n.target.value:null)),remove:Array.from(new Set(c.a.state.remove.concat([t])).values())})}})},1396:function(e,t,n){"use strict";function a(e){return null}var r=n(0),i=n.n(r),o=n(1421),s=n(1418),l=n(13),u=(n.n(l),n(117)),p=n(88),c=n(67),d=n(1356),m=n(1366),f=n(293),g=(n.n(f),n(1400)),h=n(1371),y=n(15),S=n.n(y),_=n(1402),v=n(83),E=n(100),T=n(203),b=n(56),A=n(14),O=(n.n(A),n(204)),N=n(1403),C=n(1448),P=(n.n(C),function(){function e(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),V=b.b.filter(function(e){return e.sideBar&&e.sideBar.currentSection}).map(function(e){return e.sideBar.currentSubSection}).filter(function(e){return e}).distinctUntilChanged(),w=V.flatMap(function(e){return A.Observable.fromPromise(n.i(O.a)(e))}),R=function(e){return void 0===e.id},x=A.Observable.fromPromise(n.i(l.getInstance)()),U=A.Observable.combineLatest(u.a,w,V,x).filter(function(e){var t=P(e,3),n=t[0],a=(t[1],t[2]);return!!(n&&n.modelDefinition&&n.modelDefinition.name)&&n.modelDefinition.name===a}).map(function(e){var t=P(e,4),a=t[0],r=t[1],i=t[2],o=(t[3],r.map(function(e){return e.fieldOptions.model=a,R(a)||-1===s.a.for(i).indexOf(e.name)||(e.props.disabled=!0),Object.keys(a.attributes||[]).indexOf(e.name)>=0?(e.value=a.attributes[e.name],e):(e.beforePassToFieldConverter?e.value=e.beforePassToFieldConverter(a[e.name]):e.value=a[e.name],e)}));return{fieldConfigs:[].concat(n.i(N.a)(n.i(N.b)(a.modelDefinition.name),o,a),(_.a[i]||[]).map(function(e){return e.props=e.props||{},e.props.modelToEdit=a,e})).map(function(e){return n.i(O.b)(e,a)}),modelToEdit:a,isLoading:!1}});t.a=i.a.createClass({displayName:"EditModelForm.component",propTypes:{modelId:i.a.PropTypes.string.isRequired,modelType:i.a.PropTypes.string.isRequired,onSaveSuccess:i.a.PropTypes.func.isRequired,onSaveError:i.a.PropTypes.func.isRequired,onCancel:i.a.PropTypes.func.isRequired},mixins:[E.a],getInitialState:function(){return{modelToEdit:void 0,isLoading:!0,formState:{validating:!1,valid:!0,pristine:!0},activeStep:0}},isAddOperation:function(){return"add"===this.props.modelId},componentWillMount:function(){var e=this;this.subscription=U.subscribe(function(t){e.setState(t),e.setActiveStep(e.state.activeStep)},function(e){c.a.show({message:e,action:"ok"})})},componentWillUnmount:function(){this.subscription&&this.subscription.unsubscribe()},renderSharingNotification:function(){var e={width:"100%",margin:"0 auto 3rem",position:"relative"};return this.isAddOperation()?i.a.createElement(g.a,{style:e,modelType:this.props.modelType}):null},renderStepper:function(){var e=this,t=o.a.for(this.props.modelType);return t.length>1?i.a.createElement(C.Stepper,{activeStep:this.state.activeStep,linear:!1,style:{margin:"0 -16px"}},t.map(function(t,n){return i.a.createElement(C.Step,{key:n},i.a.createElement(C.StepButton,{onClick:function(){return e.setActiveStep(n)}},e.getTranslation(t.label)))})):null},renderForm:function(){var e={width:"100%",margin:"0 auto 2rem",padding:"2rem 5rem 4rem",position:"relative"};if(this.state.isLoading)return i.a.createElement(v.a,null);return i.a.createElement("div",{style:e},this.renderStepper(),this.renderSharingNotification(),i.a.createElement(T.a,{fields:this.state.fieldConfigs,onUpdateField:this._onUpdateField,onUpdateFormStatus:this._onUpdateFormStatus}),i.a.createElement(h.a,null,i.a.createElement(d.a,{onClick:this._saveAction,isValid:this.state.formState.valid&&!this.state.formState.validating,isSaving:this.state.isSaving}),i.a.createElement(m.a,{onClick:this._closeAction})))},render:function(){return this.state.loading?i.a.createElement("div",null,"Loading data...."):this.renderForm()},setActiveStep:function(e){var t=o.a.groupsByField(this.props.modelType);t&&this.setState({activeStep:e,fieldConfigs:this.state.fieldConfigs.map(function(n){return t[n.name]===e?(n.hiddenComponent&&(n.component=n.hiddenComponent,n.hiddenComponent=void 0),n.props.style={display:"inline-block"}):(n.hiddenComponent||(n.hiddenComponent=n.component,n.component=a),n.props.style={display:"none"}),n})})},_onUpdateField:function(e,t){var n=this.state.fieldConfigs.find(function(t){return t.name==e});return n&&n.beforeUpdateConverter?p.a.update({fieldName:e,value:n.beforeUpdateConverter(t)}):p.a.update({fieldName:e,value:t})},_onUpdateFormStatus:function(e){this.setState({formState:e})},_saveAction:function(e){var t=this;e.preventDefault(),this.setState({isSaving:!0}),p.a.saveObject({id:this.props.modelId,modelType:this.props.modelType}).subscribe(function(e){t.setState({isSaving:!1}),c.a.show({message:e,translate:!0}),t.props.onSaveSuccess(t.state.modelToEdit)},function(e){if(200===e.httpStatusCode)return S.a.warn("Save errored due to empty 200 OK body"),c.a.show({message:"success",action:"ok",translate:!0}),t.props.onSaveSuccess(t.state.modelToEdit);S.a.error(e),t.setState({isSaving:!1}),n.i(f.isString)(e)&&(S.a.debug(e),c.a.show({message:e,action:"ok"})),t.props.onSaveError(e)})},_closeAction:function(e){e.preventDefault(),this.props.onCancel()}})},1399:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(37),o=n(300),s=n(1424),l=n(13),u=(n.n(l),n(14)),p=(n.n(u),n(100));i.a.createActionsFromNames(["requestExpressionStatus"]).requestExpressionStatus.debounceTime(500).map(function(e){var t=encodeURIComponent(e.data),a="expressions/description?expression="+t,r=n.i(l.getInstance)().then(function(e){return e.Api.getApi().get(a)});return u.Observable.fromPromise(r)}).concatAll().subscribe(function(e){s.a.setState(e)});var c=r.a.createClass({displayName:"IndicatorExpressionManagerContainer",propTypes:{indicatorExpressionChanged:r.a.PropTypes.func.isRequired,description:r.a.PropTypes.string.isRequired,formula:r.a.PropTypes.string.isRequired,titleText:r.a.PropTypes.string.isRequired},mixins:[p.a],getInitialState:function(){return{organisationUnitGroups:[],constants:[],programTrackedEntityAttributes:[],programIndicators:[],programDataElements:[]}},componentDidMount:function(){var e=this;n.i(l.getInstance)().then(function(e){return e.models.organisationUnitGroup.list({paging:!1,fields:"id,displayName"})}).then(function(e){return e.toArray().map(function(e){return{value:e.id,label:e.displayName}})}).then(function(t){return e.setState({organisationUnitGroups:t})}),n.i(l.getInstance)().then(function(e){return e.models.constant.list({paging:!1,fields:"id,displayName"})}).then(function(e){return e.toArray().map(function(e){return{value:e.id,label:e.displayName}})}).then(function(t){return e.setState({constants:t})}),this.refs.expressionManager.requestExpressionStatus()},getExpressionManager:function(){return this.refs.expressionManager},render:function(){return r.a.createElement(o.a,{descriptionLabel:this.getTranslation("description"),descriptionValue:this.props.description,formulaValue:this.props.formula,expressionStatusStore:s.a,expressionChanged:this.props.indicatorExpressionChanged,titleText:this.props.titleText,ref:"expressionManager"})}});t.a=c},1400:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(1358),o=n(100),s=n(13),l=(n.n(s),n(294)),u=n.n(l),p=n(55),c=n.n(p),d=r.a.createClass({displayName:"SharingNotification",propTypes:{modelType:r.a.PropTypes.string,style:r.a.PropTypes.object},mixins:[i.a,o.a],render:function(){var e=this.getCurrentUser().canCreatePublic(this.getModelDefinitionByName(this.props.modelType)),t=this.getCurrentUser().canCreatePrivate(this.getModelDefinitionByName(this.props.modelType)),n=Object.assign({},this.props.style,{background:"none",margin:"14px 0 0 -4px"}),a={verticalAlign:"super",lineHeight:"24px",paddingLeft:".5rem"},i=null;return e?i=r.a.createElement(c.a,{style:n,zDepth:0},r.a.createElement(u.a,{className:"material-icons"},"lock_open"),r.a.createElement("span",{style:a},this.getTranslation("object_will_created_public"))):t&&(i=r.a.createElement(c.a,{style:n,zDepth:0},r.a.createElement(u.a,{className:"material-icons"},"lock"),r.a.createElement("span",{style:a},this.getTranslation("object_will_created_private")))),i}});t.a=d},1401:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(u.a,null))}function i(e,t){return e.map(function(e){return e.value}).find(function(e){return-1!==Array.from(t.dataElementGroups.values()).map(function(e){return e.id}).indexOf(e)})}var o=n(0),s=n.n(o),l=n(13),u=(n.n(l),n(83)),p=n(69),c=n(509);t.a=s.a.createClass({displayName:"DataElementGroupsAssignment.component",propTypes:{source:s.a.PropTypes.object.isRequired},getInitialState:function(){return c.a.setState({dataElementGroupValues:{},remove:[],save:[]}),{dataElementGroupSets:null}},componentDidMount:function(){var e=this;n.i(l.getInstance)().then(function(e){return e.Api.getApi().get("dataElementGroupSets",{fields:"id,displayName,dataElementGroups[id,displayName]",filter:["compulsory:eq:true"],paging:!1})}).then(function(e){return e.dataElementGroupSets}).then(function(t){return e.setState({dataElementGroupSets:t})}),this.subscription=c.a.subscribe(function(){return e.forceUpdate()})},componentWillUnmount:function(){this.subscription&&this.subscription.unsubscribe&&this.subscription.unsubscribe()},_updateGroupStatus:function(e,t,n){this.props.source.dirty=!0,c.a.setState({dataElementGroupValues:Object.assign({},c.a.state.dataElementGroupValues,a({},e,n.target.value?n.target.value:null)),remove:Array.from(new Set(c.a.state.remove.concat([t])).values())})},render:function(){var e=this;return this.state.dataElementGroupSets?s.a.createElement("div",null,this.state.dataElementGroupSets.map(function(t){var n=t.dataElementGroups.map(function(e){return{value:e.id,text:e.displayName}}),a=Object.prototype.hasOwnProperty.call(c.a.state.dataElementGroupValues,t.id)?c.a.state.dataElementGroupValues[t.id]:i(n,e.props.source);return s.a.createElement("div",{key:t.id},s.a.createElement(p.a,{labelText:t.displayName,translateLabel:!1,options:n,value:a,onChange:e._updateGroupStatus.bind(e,t.id,i(n,e.props.source)),fullWidth:!0}))})):r()}})},1402:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),s=n.n(o),l=n(292),u=n.n(l),p=n(116),c=n.n(p),d=n(68),m=n.n(d),f=n(1399),g=n(14),h=(n.n(g),n(117)),y=n(1395),S=n(1401),_=n(33),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),T={saveButton:{marginRight:"1rem"},customContentStyle:{width:"95%",maxWidth:"none"}},b=function(e){function t(e,n){a(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.state={dialogValid:!0,dialogOpen:!1},i.setNumerator=i.setNumerator.bind(i),i.setDenominator=i.setDenominator.bind(i),i.closeDialog=i.closeDialog.bind(i),i.saveToModelAndCloseDialog=i.saveToModelAndCloseDialog.bind(i),i.indicatorExpressionChanged=i.indicatorExpressionChanged.bind(i),i}return i(t,e),E(t,[{key:"renderExpressionManager",value:function(){return s.a.createElement(f.a,{indicatorExpressionChanged:this.indicatorExpressionChanged,formula:this.props.modelToEdit[this.state.type]||"",description:this.props.modelToEdit[this.state.type+"Description"]||"",ref:"expressionManagerContainer"})}},{key:"render",value:function(){var e=this.context.d2,t=[s.a.createElement(m.a,{label:e.i18n.getTranslation("cancel"),onTouchTap:this.closeDialog}),s.a.createElement(m.a,{label:e.i18n.getTranslation("done"),onTouchTap:this.saveToModelAndCloseDialog,disabled:!this.state.dialogValid})];return s.a.createElement("div",null,s.a.createElement("div",{style:{marginTop:"2rem"}},s.a.createElement(c.a,{label:e.i18n.getTranslation("edit_numerator"),onClick:this.setNumerator,style:{marginRight:"2rem"}}),s.a.createElement(c.a,{label:e.i18n.getTranslation("edit_denominator"),onClick:this.setDenominator}),s.a.createElement(u.a,{title:e.i18n.getTranslation("edit_"+this.state.type),open:this.state.dialogOpen,modal:!0,actions:t,contentStyle:T.customContentStyle,autoScrollBodyContent:!0},this.state?this.renderExpressionManager():null)),s.a.createElement("div",{style:{marginTop:"2rem"}},s.a.createElement(y.a,{source:this.props.modelToEdit})))}},{key:"setNumerator",value:function(){this.setState({type:"numerator",dialogOpen:!0})}},{key:"setDenominator",value:function(){this.setState({type:"denominator",dialogOpen:!0})}},{key:"closeDialog",value:function(){this.setState({dialogOpen:!1})}},{key:"saveToModelAndCloseDialog",value:function(){this.state.expressionStatus.isValid&&(this.props.modelToEdit[this.state.type]=this.state.expressionFormula,this.props.modelToEdit[this.state.type+"Description"]=this.state.expressionDescription,h.a.setState(this.props.modelToEdit)),this.setState({dialogOpen:!1})}},{key:"indicatorExpressionChanged",value:function(e){var t={};e.expressionStatus.isValid&&(t.expressionStatus=e.expressionStatus,t.expressionDescription=e.description,t.expressionFormula=e.formula),this.setState(v({dialogValid:e.expressionStatus.isValid&&Boolean(e.description.trim())},t))}}]),t}(s.a.Component);b.propTypes={modelToEdit:s.a.PropTypes.object.isRequired,description:s.a.PropTypes.string.isRequired,formula:s.a.PropTypes.string.isRequired},t.a={dataElement:[{name:"dataElementGroupAssignment",component:function(e){return s.a.createElement("div",{style:{marginTop:"2rem"}},s.a.createElement(S.a,{source:e.modelToEdit}))}}],indicator:[{name:"indicatorGroupAssignmentAndGroupAssignments",component:n.i(_.a)(b)}]}},1403:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e){return N.a.has(e)?N.a.get(e):[]}function i(e,t,n,a){n&&t.setValue(a,e)}function o(e,t,n){return e.props[t.propName]=n?t.thenValue:t.elseValue}function s(e,t,n,a){n?(e.hiddenComponent=e.hiddenComponent||e.component,e.component=function(){return null}):e.hiddenComponent&&(e.component=e.hiddenComponent,delete e.hiddenComponent)}function l(e,t,n){n&&e.hiddenComponent?(e.component=e.hiddenComponent,delete e.hiddenComponent):(e.component=function(){return null},e.hiddenComponent=e.hiddenComponent||e.component)}function u(e){return R.has(e)?R.get(e):b.a}function p(e){return w.has(e)?w.get(e):b.a}function c(e){return void 0!==e&&null!==e}function d(e){return c(e)&&e.toString().trim().length>0}function m(e,t){return e===t}function f(e,t){return e!==t}function g(e,t){return t.indexOf(e)>=0}function h(e){try{var t=JSON.parse(e);return Array.isArray(t)&&(0===t.length||2===t.length&&!isNaN(t[0])&&!isNaN(t[1]))}catch(e){return!1}}function y(e,t){return!0===(V.a.getState()?V.a.getState()[t]:void 0)}function S(e,t){return!1===(V.a.getState()?V.a.getState()[t]:void 0)}function _(e,t,n){var a=e.whenFieldName,r=e.operatorFn,i=e.whenValue;return r(n[a],i)}function v(e,t,n,a){return e.map(function(e){O.a.debug("For "+t.field+" run the rule where when "+(e.field||t.field)+" "+p(e.operator).name+" "+(e.value||"")+" then run");var r=a.find(function(n){return n.name===(e.field||t.field)});return _({whenFieldName:e.field?e.field:t.field,operatorFn:p(e.operator),whenValue:e.value},r,n)})}function E(e,t,n){return e.forEach(function(e){var r=P()(e.when)?e.when:[e.when],i=v(r,e,n,t).some(function(e){return!0===e});O.a.debug("And the result is",i),(e.operations||[e.operation]).forEach(function(r){var o=t.find(function(t){return t.name===(r.field||e.field)}),s=r.field,l=r.type,p=a(r,["field","type"]);O.a.debug("---- For field "+(s||e.field)+" execute "+u(l).name+" with",p),u(l)(o,p,i,n)})}),t}t.b=r,t.a=E;var T=n(210),b=n.n(T),A=n(15),O=n.n(A),N=n(1422),C=n(86),P=n.n(C),V=n(215),w=new Map([["EQUALS",m],["NOT_EQUALS",f],["HAS_VALUE",c],["HAS_STRING_VALUE",d],["ONEOF",g],["SYSTEM_SETTING_IS_TRUE",y],["SYSTEM_SETTING_IS_FALSE",S],["IS_VALID_POINT",h]]),R=new Map([["SET_PROP",o],["CHANGE_VALUE",i],["HIDE_FIELD",s],["SHOW_FIELD",l]])},1413:function(e,t,n){"use strict";t.a=["dataDimensionType"]},1414:function(e,t,n){"use strict";t.a=["dataDimensionType"]},1415:function(e,t,n){"use strict";t.a=["name"]},1416:function(e,t,n){"use strict";t.a=["dataDimensionType"]},1417:function(e,t,n){"use strict";t.a=["dataDimensionType"]},1418:function(e,t,n){"use strict";var a=n(1413),r=n(1414),i=n(1415),o=n(1416),s=n(1417),l=n(1419),u=n(1420),p={category:a.a,categoryCombo:r.a,categoryOptionCombo:i.a,categoryOptionGroup:o.a,categoryOptionGroupSet:s.a,optionSet:l.a,programRule:u.a};t.a={for:function(e){return e&&p[e]?p[e]:[]}}},1419:function(e,t,n){"use strict";t.a=["valueType"]},1420:function(e,t,n){"use strict";t.a=["program"]},1421:function(e,t,n){"use strict";var a=n(295),r=new Map([["programRule",[{label:"enter_program_rule_details",fields:["program","name","description","priority"]},{label:"enter_program_rule_expression",fields:["condition"]},{label:"define_program_rule_actions",fields:["programRuleActions"]}]]]);t.a={for:function(e){return e&&r.has(e)?r.get(e):[{label:"details",fields:a.a.for(e)}]},groupsByField:function(e){if(e&&r.has(e))return r.get(e).map(function(e){return e.fields}).reduce(function(e,t,n){return t.forEach(function(t){return e[t]=n}),e},{})}}},1422:function(e,t,n){"use strict";t.a=new Map([["dataElement",[{field:"domainType",when:{operator:"EQUALS",value:"TRACKER"},operations:[{field:"categoryCombo",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:function(e,t){e.optionSet&&e.optionSet.valueType&&(t.value=e.optionSet.valueType,e[t.name]!==e.optionSet.valueType&&(e[t.name]=e.optionSet.valueType))}}]},{field:"aggregationType",when:{field:"valueType",operator:"ONEOF",value:["TEXT","LONG_TEXT","LETTER","PHONE_NUMBER","EMAIL","TRACKER_ASSOCIATE","USERNAME","FILE_RESOURCE","COORDINATE"]},operations:[{field:"aggregationType",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{field:"aggregationType",type:"CHANGE_VALUE",setValue:function(e,t){t.value=e[t.name]="NONE"}}]}]],["attribute",[{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:function(e,t){t.value=e[t.name]=e.optionSet.valueType}}]}]],["trackedEntityAttribute",[{field:"valueType",when:[{operator:"ONEOF",value:["BOOLEAN","TRUE_ONLY","DATE","TRACKER_ASSOCIATE","USERNAME","OPTION_SET"]}],operations:[{field:"unique",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{field:"unique",type:"CHANGE_VALUE",setValue:function(e,t){t.value=e[t.property]=!1}}]},{field:"valueType",when:{field:"optionSet",operator:"HAS_VALUE"},operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1},{type:"CHANGE_VALUE",setValue:function(e,t){t.value=e[t.name]=e.optionSet.valueType}}]}]],["externalMapLayer",[{field:"legendSetUrl",when:[{field:"legendSet",operator:"HAS_VALUE"}],operations:[{field:"legendSetUrl",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"legendSet",when:[{field:"legendSetUrl",operator:"HAS_STRING_VALUE"}],operations:[{field:"legendSet",type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]],["organisationUnit",[{field:"dataSets",when:[{operator:"SYSTEM_SETTING_IS_FALSE",value:"keyAllowObjectAssignment"}],operations:[{field:"dataSets",type:"HIDE_FIELD"}]},{field:"featureType",when:[{field:"coordinates",operator:"HAS_VALUE"}],operations:[{type:"CHANGE_VALUE",setValue:function(e){e.coordinates?function(e){try{var t=JSON.parse(e);return Array.isArray(t)&&(0===t.length||2===t.length&&!isNaN(t[0])&&!isNaN(t[1]))}catch(e){}return!1}(e.coordinates)&&(e.featureType="POINT"):e.featureType=null}}]}]],["programRule",[{field:"name",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"description",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"priority",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"condition",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]},{field:"programRuleActions",when:[{field:"program",operator:"HAS_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!1,elseValue:!0}]}]],["programRuleVariable",[{field:"program",when:[{field:"dataElement",operator:"HAS_STRING_VALUE"},{field:"trackedEntityAttribute",operator:"HAS_STRING_VALUE"},{field:"programStage",operator:"HAS_STRING_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]},{field:"dataElement",when:[{field:"programRuleVariableSourceType",operator:"ONEOF",value:["CALCULATED_VALUE","TEI_ATTRIBUTE"]}],operations:[{field:"dataElement",type:"HIDE_FIELD"}]},{field:"trackedEntityAttribute",when:[{field:"programRuleVariableSourceType",operator:"NOT_EQUALS",value:"TEI_ATTRIBUTE"}],operations:[{field:"trackedEntityAttribute",type:"HIDE_FIELD"}]},{field:"programStage",when:[{field:"programRuleVariableSourceType",operator:"NOT_EQUALS",value:"DATAELEMENT_NEWEST_EVENT_PROGRAM_STAGE"}],operations:[{field:"programStage",type:"HIDE_FIELD"}]},{field:"programStage",when:[{field:"dataElement",operator:"HAS_STRING_VALUE"}],operations:[{type:"SET_PROP",propName:"disabled",thenValue:!0,elseValue:!1}]}]]])},1424:function(e,t,n){"use strict";var a=n(23);t.a=a.a.create()},1448:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Stepper=t.StepLabel=t.StepContent=t.StepButton=t.Step=void 0;var r=n(308),i=a(r),o=n(309),s=a(o),l=n(310),u=a(l),p=n(311),c=a(p),d=n(312),m=a(d);t.Step=i.default,t.StepButton=s.default,t.StepContent=u.default,t.StepLabel=c.default,t.Stepper=m.default},1511:function(e,t,n){"use strict";function a(e,t){"No changes to be saved"===e&&n.i(p.a)("/list/"+t.groupName+"/"+t.modelType)}function r(e){return o.a.createElement(l.a,null,o.a.createElement(u.a,c({},e,{onCancel:function(){return n.i(p.a)("/list/"+e.groupName+"/"+e.modelType)},onSaveSuccess:function(){return n.i(p.a)("/list/"+e.groupName+"/"+e.modelType)},onSaveError:function(t){return a(t,e)}})))}t.a=r;var i=n(0),o=n.n(i),s=n(55),l=n.n(s),u=n(1396),p=n(101),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}},315:function(e,t,n){"use strict";function a(e){var t=e.params.modelType||"organisationUnit";return i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:"1rem"}},i.a.createElement(l.a,{schema:t,groupName:e.params.groupName},n.i(s.camelCaseToUnderscores)(t))),i.a.createElement(o.a,{groupName:e.params.groupName,modelType:t,modelId:e.params.modelId}))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(1511),s=n(293),l=(n.n(s),n(1368));t.default=a}});
//# sourceMappingURL=0-7b4b72284bb16785357b.js.map