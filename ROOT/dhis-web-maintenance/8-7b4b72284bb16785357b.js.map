{"version":3,"sources":["webpack:///8-7b4b72284bb16785357b.js","webpack:///./src/EditModel/EditDataSetSections.component.js","webpack:///./~/d2-ui/lib/i18n/LocaleSelector.component.js?7c14***","webpack:///./~/d2-ui/lib/i18n/TranslationDialog.component.js?7850***","webpack:///./~/d2-ui/lib/i18n/TranslationForm.component.js?f3ce***","webpack:///./~/d2-ui/lib/i18n/translationForm.actions.js?cdfe***","webpack:///./src/EditModel/GreyFieldDialog.component.js","webpack:///./src/EditModel/SectionDialog.component.js"],"names":["webpackJsonp","1342","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_loglevel__","__WEBPACK_IMPORTED_MODULE_1_loglevel___default","__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_loading_mask_LoadingMask_component__","__WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_headings_Heading_component__","__WEBPACK_IMPORTED_MODULE_4_d2_ui_lib_data_table_DataTable_component__","__WEBPACK_IMPORTED_MODULE_5_material_ui_FloatingActionButton_FloatingActionButton__","__WEBPACK_IMPORTED_MODULE_5_material_ui_FloatingActionButton_FloatingActionButton___default","__WEBPACK_IMPORTED_MODULE_6_material_ui_FontIcon_FontIcon__","__WEBPACK_IMPORTED_MODULE_6_material_ui_FontIcon_FontIcon___default","__WEBPACK_IMPORTED_MODULE_7__SectionDialog_component__","__WEBPACK_IMPORTED_MODULE_8__GreyFieldDialog_component__","__WEBPACK_IMPORTED_MODULE_9__Snackbar_snack_actions__","__WEBPACK_IMPORTED_MODULE_10__modelToEditStore__","__WEBPACK_IMPORTED_MODULE_11_d2_ui_lib_i18n_TranslationDialog_component__","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","length","err","Array","isArray","_createClass","defineProperties","target","props","descriptor","key","protoProps","staticProps","styles","heading","paddingBottom","fab","textAlign","marginTop","bottom","right","position","zIndex","EditDataSetSections","_React$Component","context","this","_this","getPrototypeOf","state","categoryCombos","editSectionModel","greyFieldSectionModel","Promise","all","d2","Api","getApi","get","params","modelId","join","fields","paging","then","_ref","_ref2","catComboList","setState","sections","toArray","sort","a","b","sortOrder","map","cc","id","text","displayName","getTranslation","handleAddSectionClick","bind","handleEditSectionClick","handleSectionSaved","handleDeleteSectionClick","handleTranslateSectionClick","handleTranslationSaved","handleTranslationErrored","handleSectionGreyFieldsClick","swapSections","moveSectionUp","moveSectionDown","i18n","newSection","models","assign","dataSet","reduce","p","s","Math","max","savedSection","_this2","replaced","forceUpdate","section","_this3","show","message","action","onActionTouchTap","delete","newSections","filter","catch","warn","translationModel","translate","errorMessage","error","sectionA","sectionB","_this4","swapOrder","save","currentIndex","indexOf","swapSection","_this5","contextActions","edit","manage_grey_fields","move_up","move_down","contextMenuIcons","contextActionChecker","model","createElement","style","columns","rows","contextMenuActions","primaryAction","isContextActionAllowed","open","sectionModel","onRequestClose","onSaveSection","onRequestSave","objectToTranslate","objectTypeToTranslate","modelDefinition","onTranslationSaved","onTranslationError","fieldsToTranslate","onClick","className","Component","propTypes","PropTypes","any","isRequired","contextTypes","1359","__WEBPACK_IMPORTED_MODULE_1_material_ui_SelectField_SelectField__","__WEBPACK_IMPORTED_MODULE_1_material_ui_SelectField_SelectField___default","__WEBPACK_IMPORTED_MODULE_2_material_ui_MenuItem_MenuItem__","__WEBPACK_IMPORTED_MODULE_2_material_ui_MenuItem_MenuItem___default","__WEBPACK_IMPORTED_MODULE_3__i18n_Translate_mixin__","_extends","arguments","source","hasOwnProperty","createClass","string","locales","arrayOf","shape","name","locale","onChange","func","mixins","render","localeMenuItems","payload","concat","index","primaryText","fullWidth","hintText","_localeChange","event","1360","__WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__","__WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog__","__WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog___default","__WEBPACK_IMPORTED_MODULE_2_react__","__WEBPACK_IMPORTED_MODULE_2_react___default","__WEBPACK_IMPORTED_MODULE_3__TranslationForm_component__","strings","add","TranslationDialog","_Component","TranslationForm","translationSaved","translationError","closeSharingDialog","title","autoDetectWindowHeight","autoScrollBodyContent","onCancel","newProps","bool","array","object","1361","getTranslationFormData","translationStore","__WEBPACK_IMPORTED_MODULE_9__store_Store__","__WEBPACK_IMPORTED_MODULE_4__translationForm_actions__","subscribe","translations","__WEBPACK_IMPORTED_MODULE_8_rxjs__","combineLatest","_len","data","_key","apply","setTranslations","getTranslationFormFor","__WEBPACK_IMPORTED_MODULE_6__component_helpers_withStateFrom__","__WEBPACK_IMPORTED_MODULE_1_material_ui_TextField_TextField__","__WEBPACK_IMPORTED_MODULE_1_material_ui_TextField_TextField___default","__WEBPACK_IMPORTED_MODULE_2__i18n_Translate_mixin__","__WEBPACK_IMPORTED_MODULE_3__i18n_LocaleSelector_component__","__WEBPACK_IMPORTED_MODULE_5_d2_utilizr_lib_camelCaseToUnderscores__","__WEBPACK_IMPORTED_MODULE_5_d2_utilizr_lib_camelCaseToUnderscores___default","__WEBPACK_IMPORTED_MODULE_7_material_ui_RaisedButton_RaisedButton__","__WEBPACK_IMPORTED_MODULE_7_material_ui_RaisedButton_RaisedButton___default","__WEBPACK_IMPORTED_MODULE_10__circular_progress_CircularProgress__","getInitialState","loading","translationValues","currentSelectedLocale","getDefaultProps","getLoadingdataElement","mode","renderFieldsToTranslate","fieldName","floatingLabelText","getTranslationValueFor","_setValue","renderForm","label","primary","_saveTranslations","marginLeft","renderHelpText","minHeight","setCurrentLocale","Boolean","translation","find","t","property","toLowerCase","newTranslations","toUpperCase","1362","getLocales","localePromise","__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__","__WEBPACK_IMPORTED_MODULE_2_rxjs__","fromPromise","getModelHref","href","apiEndpoint","getTranslationsForModel","of","flatMap","reject","Error","d","saveTranslations","__WEBPACK_IMPORTED_MODULE_0__action_Action__","_ref$data","complete","translationHref","update","dataType","1512","_objectWithoutProperties","obj","keys","__WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog__","__WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog___default","__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton__","__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton___default","__WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton__","__WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton___default","__WEBPACK_IMPORTED_MODULE_5_material_ui_Checkbox_Checkbox__","__WEBPACK_IMPORTED_MODULE_5_material_ui_Checkbox_Checkbox___default","__WEBPACK_IMPORTED_MODULE_6__forms_form_fields_drop_down__","__WEBPACK_IMPORTED_MODULE_7__Snackbar_snack_actions__","__WEBPACK_IMPORTED_MODULE_8__modelToEditStore__","dialogContent","maxWidth","dialogDiv","overflowX","overflowY","table","borderSpacing","borderCollapse","margin","th","whiteSpace","border","padding","thDataElements","background","td","minWidth","tdDataElement","GreyFieldDialog","categories","closeDialog","handleSaveClick","dataElements","info","cocMap","categoryArrayToMap","appendage","reduceAppendage","prev","categoryOption","out","pop","categoryOptions","assignCocs","options","coc","keyPos","splice","list","forEach","categoryCombo","JSON","parse","stringify","categoryOptionCombos","optionPath","o","greyedFields","gf","dataElement","categoryOptionCombo","currentCategoryCombo","optionCount","oc","c","size","res","prevRowColCount","cat","catNum","colSpan","slice","product","isLastHeader","row","e","rep","opt","optNum","fieldArray","fieldNum","resolveCoc","shift","isGreyed","toggleBoggle","dataElementId","categoryOptionComboId","disable","greyedCocs","includes","deId","checked","labelPosition","labelStyle","onCheck","_this6","getCocFields","pout","currentSectionDataElementIds","de","dataSetElements","dse","deNum","cocFields","renderCheckbox","_this7","_props","extraProps","uniqueCatComboIds","sectionDataElementIds","categoryCombosForSection","catCombos","catCombo","localeCompare","contentStyle","actions","onTouchTap","marginRight","labelText","width","renderTableHeader","renderDataElements","1513","__WEBPACK_IMPORTED_MODULE_5_material_ui_TextField_TextField__","__WEBPACK_IMPORTED_MODULE_5_material_ui_TextField_TextField___default","__WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_group_editor_GroupEditorWithOrdering_component__","__WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_store_Store__","__WEBPACK_IMPORTED_MODULE_8_material_ui_Checkbox__","__WEBPACK_IMPORTED_MODULE_8_material_ui_Checkbox___default","__WEBPACK_IMPORTED_MODULE_9__forms_form_fields_drop_down__","__WEBPACK_IMPORTED_MODULE_10__Snackbar_snack_actions__","__WEBPACK_IMPORTED_MODULE_11__modelToEditStore__","dataElementStore","assignedDataElementStore","indicatorStore","assignedIndicatorStore","SectionDialog","handleCategoryComboChange","handleFilterChange","handleNameChange","handleCodeChange","handleDescriptionChange","assignDataElements","removeDataElements","setAssignedDataElements","assignIndicators","removeIndicators","setAssignedIndicators","saveSection","handleRowTotalsChange","showRowTotals","handleColumnTotalsChange","showColumnTotals","subscriptions","currentSectionId","sectionArray","otherSections","filterDataElementIds","elements","indicators","code","nameError","codeError","description","filterText","disposable","unsubscribe","categoryComboId","getState","nameDupe","codeDupe","resolve","trim","response","uid","disabled","float","display","lineHeight","color","fontSize","marginBottom","itemStore","assignedItemStore","onAssignItems","onRemoveItems","onOrderChanged","height","_this8","sectionIdDiv","fontFamily","validateName","errorText","onBlur","multiLine","renderFilters","renderAvailableOptions"],"mappings":"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","file":"8-7b4b72284bb16785357b.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ 1342:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_loglevel__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_loading_mask_LoadingMask_component__ = __webpack_require__(502);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_headings_Heading_component__ = __webpack_require__(150);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d2_ui_lib_data_table_DataTable_component__ = __webpack_require__(296);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_material_ui_FloatingActionButton_FloatingActionButton__ = __webpack_require__(297);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_material_ui_FloatingActionButton_FloatingActionButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_material_ui_FloatingActionButton_FloatingActionButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_material_ui_FontIcon_FontIcon__ = __webpack_require__(294);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_material_ui_FontIcon_FontIcon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_material_ui_FontIcon_FontIcon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__SectionDialog_component__ = __webpack_require__(1513);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__GreyFieldDialog_component__ = __webpack_require__(1512);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__Snackbar_snack_actions__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__modelToEditStore__ = __webpack_require__(117);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_d2_ui_lib_i18n_TranslationDialog_component__ = __webpack_require__(1360);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar styles = {\n    heading: {\n        paddingBottom: 18\n    },\n    fab: {\n        textAlign: 'right',\n        marginTop: '1rem',\n        bottom: '1.5rem',\n        right: '1.5rem',\n        position: 'fixed',\n        zIndex: 10\n    }\n};\n\nvar EditDataSetSections = function (_React$Component) {\n    _inherits(EditDataSetSections, _React$Component);\n\n    function EditDataSetSections(props, context) {\n        _classCallCheck(this, EditDataSetSections);\n\n        var _this = _possibleConstructorReturn(this, (EditDataSetSections.__proto__ || Object.getPrototypeOf(EditDataSetSections)).call(this, props, context));\n\n        _this.state = {\n            categoryCombos: null,\n            editSectionModel: false,\n            greyFieldSectionModel: false\n        };\n\n        Promise.all([context.d2.Api.getApi().get(['dataSets', props.params.modelId, 'categoryCombos'].join('/'), { fields: 'id,displayName', paging: false })]).then(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 1),\n                catComboList = _ref2[0];\n\n            _this.setState({\n                sections: __WEBPACK_IMPORTED_MODULE_10__modelToEditStore__[\"a\" /* default */].state.sections.toArray().sort(function (a, b) {\n                    return a.sortOrder - b.sortOrder;\n                }),\n                categoryCombos: catComboList.categoryCombos.map(function (cc) {\n                    return {\n                        value: cc.id,\n                        text: cc.displayName === 'default' ? _this.getTranslation('none') : cc.displayName\n                    };\n                })\n            });\n        });\n\n        _this.handleAddSectionClick = _this.handleAddSectionClick.bind(_this);\n        _this.handleEditSectionClick = _this.handleEditSectionClick.bind(_this);\n        _this.handleSectionSaved = _this.handleSectionSaved.bind(_this);\n\n        _this.handleDeleteSectionClick = _this.handleDeleteSectionClick.bind(_this);\n        _this.handleTranslateSectionClick = _this.handleTranslateSectionClick.bind(_this);\n        _this.handleTranslationSaved = _this.handleTranslationSaved.bind(_this);\n        _this.handleTranslationErrored = _this.handleTranslationErrored.bind(_this);\n\n        _this.handleSectionGreyFieldsClick = _this.handleSectionGreyFieldsClick.bind(_this);\n\n        _this.swapSections = _this.swapSections.bind(_this);\n        _this.moveSectionUp = _this.moveSectionUp.bind(_this);\n        _this.moveSectionDown = _this.moveSectionDown.bind(_this);\n\n        _this.getTranslation = context.d2.i18n.getTranslation.bind(context.d2.i18n);\n        return _this;\n    }\n\n    _createClass(EditDataSetSections, [{\n        key: 'handleAddSectionClick',\n        value: function handleAddSectionClick() {\n            var newSection = this.context.d2.models.sections.create();\n            this.setState(function (state) {\n                return {\n                    editSectionModel: Object.assign(newSection, {\n                        dataSet: { id: __WEBPACK_IMPORTED_MODULE_10__modelToEditStore__[\"a\" /* default */].state.id },\n                        sortOrder: state.sections.reduce(function (p, s) {\n                            return Math.max(s.sortOrder, p);\n                        }, 0) + 1\n                    })\n                };\n            });\n        }\n    }, {\n        key: 'handleEditSectionClick',\n        value: function handleEditSectionClick(editSectionModel) {\n            this.setState({ editSectionModel: editSectionModel });\n        }\n    }, {\n        key: 'handleSectionSaved',\n        value: function handleSectionSaved(savedSection) {\n            var _this2 = this;\n\n            this.setState(function (state) {\n                var replaced = false;\n                var sections = state.sections.map(function (s) {\n                    if (s.id === savedSection.id) {\n                        replaced = true;\n                        return savedSection;\n                    }\n                    return s;\n                }).sort(function (a, b) {\n                    return a.sortOrder - b.sortOrder;\n                });\n                if (!replaced) {\n                    sections.push(savedSection);\n                }\n\n                __WEBPACK_IMPORTED_MODULE_10__modelToEditStore__[\"a\" /* default */].setState(Object.assign(__WEBPACK_IMPORTED_MODULE_10__modelToEditStore__[\"a\" /* default */].state, { sections: sections }));\n                return {\n                    editSectionModel: false,\n                    greyFieldSectionModel: false,\n                    sections: sections\n                };\n            }, function () {\n                _this2.forceUpdate();\n            });\n        }\n    }, {\n        key: 'handleDeleteSectionClick',\n        value: function handleDeleteSectionClick(section) {\n            var _this3 = this;\n\n            __WEBPACK_IMPORTED_MODULE_9__Snackbar_snack_actions__[\"a\" /* default */].show({\n                message: this.getTranslation('confirm_delete_section') + ' ' + section.displayName,\n                action: 'confirm',\n                onActionTouchTap: function onActionTouchTap() {\n                    section.delete().then(function () {\n                        var newSections = __WEBPACK_IMPORTED_MODULE_10__modelToEditStore__[\"a\" /* default */].state.sections;\n                        __WEBPACK_IMPORTED_MODULE_10__modelToEditStore__[\"a\" /* default */].setState(Object.assign(__WEBPACK_IMPORTED_MODULE_10__modelToEditStore__[\"a\" /* default */].state, {\n                            sections: (Array.isArray(newSections) ? newSections : newSections.toArray()).filter(function (s) {\n                                return s.id !== section.id;\n                            })\n                        }));\n\n                        __WEBPACK_IMPORTED_MODULE_9__Snackbar_snack_actions__[\"a\" /* default */].show({ message: _this3.getTranslation('section_deleted') });\n                        _this3.setState(function (state) {\n                            return {\n                                sections: state.sections.filter(function (s) {\n                                    return s.id !== section.id;\n                                })\n                            };\n                        });\n                    }).catch(function (err) {\n                        __WEBPACK_IMPORTED_MODULE_9__Snackbar_snack_actions__[\"a\" /* default */].show({ message: _this3.getTranslation('failed_to_delete_section'), action: 'ok' });\n                        __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.warn('Failed to delete section', err);\n                    });\n                }\n            });\n        }\n    }, {\n        key: 'handleTranslateSectionClick',\n        value: function handleTranslateSectionClick(section) {\n            this.setState({\n                translationModel: section\n            });\n        }\n    }, {\n        key: 'handleTranslationSaved',\n        value: function handleTranslationSaved() {\n            __WEBPACK_IMPORTED_MODULE_9__Snackbar_snack_actions__[\"a\" /* default */].show({ message: 'translation_saved', translate: true });\n        }\n    }, {\n        key: 'handleTranslationErrored',\n        value: function handleTranslationErrored(errorMessage) {\n            __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.error(errorMessage);\n            __WEBPACK_IMPORTED_MODULE_9__Snackbar_snack_actions__[\"a\" /* default */].show({ message: 'translation_save_error', action: 'ok', translate: true });\n        }\n    }, {\n        key: 'handleSectionGreyFieldsClick',\n        value: function handleSectionGreyFieldsClick(section) {\n            this.setState({ greyFieldSectionModel: section });\n        }\n    }, {\n        key: 'swapSections',\n        value: function swapSections(sectionA, sectionB) {\n            var _this4 = this;\n\n            this.setState(function (state) {\n                var swapOrder = sectionA.sortOrder;\n                sectionA.sortOrder = sectionB.sortOrder; // eslint-disable-line\n                sectionB.sortOrder = swapOrder; // eslint-disable-line\n\n                Promise.all([sectionA.save(), sectionB.save()]).then(function () {\n                    __WEBPACK_IMPORTED_MODULE_9__Snackbar_snack_actions__[\"a\" /* default */].show({ message: _this4.getTranslation('section_moved') });\n                }).catch(function (err) {\n                    __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.warn('Failed to swap sections:', err);\n                    __WEBPACK_IMPORTED_MODULE_9__Snackbar_snack_actions__[\"a\" /* default */].show({ message: _this4.getTranslation('failed_to_move_section'), action: 'ok' });\n                });\n\n                return {\n                    sections: state.sections.sort(function (a, b) {\n                        return a.sortOrder - b.sortOrder;\n                    })\n                };\n            });\n        }\n    }, {\n        key: 'moveSectionUp',\n        value: function moveSectionUp(section) {\n            var currentIndex = this.state.sections.indexOf(section);\n            if (currentIndex > 0) {\n                var swapSection = this.state.sections[currentIndex - 1];\n                this.swapSections(swapSection, section);\n            }\n        }\n    }, {\n        key: 'moveSectionDown',\n        value: function moveSectionDown(section) {\n            var currentIndex = this.state.sections.indexOf(section);\n            if (currentIndex < this.state.sections.length - 1) {\n                var swapSection = this.state.sections[currentIndex + 1];\n                this.swapSections(swapSection, section);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this5 = this;\n\n            var contextActions = {\n                edit: this.handleEditSectionClick,\n                delete: this.handleDeleteSectionClick,\n                translate: this.handleTranslateSectionClick,\n                manage_grey_fields: this.handleSectionGreyFieldsClick,\n                move_up: this.moveSectionUp,\n                move_down: this.moveSectionDown\n            };\n\n            var contextMenuIcons = {\n                edit: 'edit',\n                move_up: 'arrow_upward',\n                move_down: 'arrow_downward',\n                manage_grey_fields: 'do_not_disturb'\n            };\n\n            var contextActionChecker = function contextActionChecker(model, action) {\n                if (action === 'move_up') {\n                    return _this5.state.sections.indexOf(model) > 0;\n                } else if (action === 'move_down') {\n                    return _this5.state.sections.indexOf(model) < _this5.state.sections.length - 1;\n                }\n\n                return true;\n            };\n\n            return this.state.sections === undefined ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_d2_ui_lib_loading_mask_LoadingMask_component__[\"a\" /* default */], null) : __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                null,\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    __WEBPACK_IMPORTED_MODULE_3_d2_ui_lib_headings_Heading_component__[\"a\" /* default */],\n                    { style: styles.heading },\n                    __WEBPACK_IMPORTED_MODULE_10__modelToEditStore__[\"a\" /* default */].state.displayName,\n                    ' ',\n                    this.getTranslation('section_management')\n                ),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_d2_ui_lib_data_table_DataTable_component__[\"a\" /* default */], {\n                    columns: ['name'],\n                    rows: this.state.sections,\n                    contextMenuActions: contextActions,\n                    contextMenuIcons: contextMenuIcons,\n                    primaryAction: contextActions.edit,\n                    isContextActionAllowed: contextActionChecker\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7__SectionDialog_component__[\"a\" /* default */], {\n                    open: !!this.state.editSectionModel,\n                    sectionModel: this.state.editSectionModel,\n                    categoryCombos: this.state.categoryCombos,\n                    onRequestClose: function onRequestClose() {\n                        _this5.setState({ editSectionModel: false });\n                    },\n                    onSaveSection: this.handleSectionSaved\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__GreyFieldDialog_component__[\"a\" /* default */], {\n                    open: !!this.state.greyFieldSectionModel,\n                    sectionModel: this.state.greyFieldSectionModel,\n                    onRequestClose: function onRequestClose() {\n                        _this5.setState({ greyFieldSectionModel: false });\n                    },\n                    onRequestSave: this.handleSectionSaved\n                }),\n                this.state.translationModel ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_d2_ui_lib_i18n_TranslationDialog_component__[\"a\" /* default */], {\n                    objectToTranslate: this.state.translationModel,\n                    objectTypeToTranslate: this.state.translationModel && this.state.translationModel.modelDefinition,\n                    open: !!this.state.translationModel,\n                    onTranslationSaved: this.handleTranslationSaved,\n                    onTranslationError: this.handleTranslationErrored,\n                    onRequestClose: function onRequestClose() {\n                        _this5.setState({ translationModel: null });\n                    },\n                    fieldsToTranslate: ['name']\n                }) : null,\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    { style: styles.fab },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        __WEBPACK_IMPORTED_MODULE_5_material_ui_FloatingActionButton_FloatingActionButton___default.a,\n                        { onClick: this.handleAddSectionClick },\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                            __WEBPACK_IMPORTED_MODULE_6_material_ui_FontIcon_FontIcon___default.a,\n                            { className: 'material-icons' },\n                            'add'\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return EditDataSetSections;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);\n\nEditDataSetSections.propTypes = {\n    params: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.any.isRequired\n};\nEditDataSetSections.contextTypes = {\n    d2: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.any.isRequired\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (EditDataSetSections);\n\n/***/ }),\n\n/***/ 1359:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_SelectField_SelectField__ = __webpack_require__(118);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_SelectField_SelectField___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_material_ui_SelectField_SelectField__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_MenuItem_MenuItem__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_MenuItem_MenuItem___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_material_ui_MenuItem_MenuItem__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__i18n_Translate_mixin__ = __webpack_require__(100);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createClass({\n    displayName: 'LocaleSelector.component',\n\n    propTypes: {\n        value: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string,\n        locales: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.arrayOf(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.shape({\n            name: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired,\n            locale: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired\n        })).isRequired,\n        onChange: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired\n    },\n\n    mixins: [__WEBPACK_IMPORTED_MODULE_3__i18n_Translate_mixin__[\"a\" /* default */]],\n\n    render: function render() {\n        var localeMenuItems = [{ payload: '', text: '' }].concat(this.props.locales).map(function (locale, index) {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_material_ui_MenuItem_MenuItem___default.a, {\n                key: index,\n                primaryText: locale.name,\n                value: locale.locale\n            });\n        });\n\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_1_material_ui_SelectField_SelectField___default.a,\n            _extends({\n                fullWidth: true\n            }, this.props, {\n                value: this.state && this.state.locale,\n                hintText: this.getTranslation('select_locale'),\n                onChange: this._localeChange\n            }),\n            localeMenuItems\n        );\n    },\n    _localeChange: function _localeChange(event, index, locale) {\n        this.setState({\n            locale: locale\n        });\n\n        this.props.onChange(locale, event);\n    }\n}));\n\n/***/ }),\n\n/***/ 1360:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog__ = __webpack_require__(292);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__TranslationForm_component__ = __webpack_require__(1361);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__[\"config\"].i18n.strings.add('close');\n__WEBPACK_IMPORTED_MODULE_0_d2_lib_d2__[\"config\"].i18n.strings.add('sharing_settings');\n\nvar TranslationDialog = function (_Component) {\n    _inherits(TranslationDialog, _Component);\n\n    function TranslationDialog(props, context) {\n        _classCallCheck(this, TranslationDialog);\n\n        var _this = _possibleConstructorReturn(this, (TranslationDialog.__proto__ || Object.getPrototypeOf(TranslationDialog)).call(this, props, context));\n\n        _this.i18n = context.d2.i18n;\n\n        _this.state = {\n            TranslationForm: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__TranslationForm_component__[\"a\" /* getTranslationFormFor */])(_this.props.objectToTranslate)\n        };\n\n        _this.translationSaved = _this.translationSaved.bind(_this);\n        _this.translationError = _this.translationError.bind(_this);\n        _this.closeSharingDialog = _this.closeSharingDialog.bind(_this);\n        return _this;\n    }\n\n    _createClass(TranslationDialog, [{\n        key: 'render',\n        value: function render() {\n            return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_1_material_ui_Dialog_Dialog___default.a,\n                _extends({\n                    title: this.i18n.getTranslation('translation_dialog_title'),\n                    autoDetectWindowHeight: true,\n                    autoScrollBodyContent: true\n                }, this.props),\n                __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(this.state.TranslationForm, {\n                    onTranslationSaved: this.translationSaved,\n                    onTranslationError: this.translationError,\n                    onCancel: this.closeSharingDialog,\n                    fieldsToTranslate: this.props.fieldsToTranslate\n                })\n            );\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(newProps) {\n            if (newProps.objectToTranslate) {\n                this.setState({\n                    TranslationForm: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__TranslationForm_component__[\"a\" /* getTranslationFormFor */])(newProps.objectToTranslate)\n                });\n            }\n        }\n    }, {\n        key: 'closeSharingDialog',\n        value: function closeSharingDialog() {\n            this.props.onRequestClose();\n        }\n    }, {\n        key: 'translationSaved',\n        value: function translationSaved() {\n            this.props.onTranslationSaved();\n            this.closeSharingDialog();\n        }\n    }, {\n        key: 'translationError',\n        value: function translationError() {\n            this.props.onTranslationError();\n        }\n    }]);\n\n    return TranslationDialog;\n}(__WEBPACK_IMPORTED_MODULE_2_react__[\"Component\"]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TranslationDialog);\n\n\nTranslationDialog.propTypes = {\n    objectToTranslate: __WEBPACK_IMPORTED_MODULE_2_react___default.a.PropTypes.shape({\n        id: __WEBPACK_IMPORTED_MODULE_2_react___default.a.PropTypes.string.isRequired\n    }).isRequired,\n    onTranslationSaved: __WEBPACK_IMPORTED_MODULE_2_react___default.a.PropTypes.func.isRequired,\n    onTranslationError: __WEBPACK_IMPORTED_MODULE_2_react___default.a.PropTypes.func.isRequired,\n    open: __WEBPACK_IMPORTED_MODULE_2_react___default.a.PropTypes.bool,\n    onRequestClose: __WEBPACK_IMPORTED_MODULE_2_react___default.a.PropTypes.func.isRequired,\n    fieldsToTranslate: __WEBPACK_IMPORTED_MODULE_2_react___default.a.PropTypes.array\n};\n\nTranslationDialog.contextTypes = {\n    d2: __WEBPACK_IMPORTED_MODULE_2_react__[\"PropTypes\"].object\n};\n\n/***/ }),\n\n/***/ 1361:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getTranslationFormFor;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_TextField_TextField__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_material_ui_TextField_TextField___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_material_ui_TextField_TextField__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__i18n_Translate_mixin__ = __webpack_require__(100);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__i18n_LocaleSelector_component__ = __webpack_require__(1359);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__translationForm_actions__ = __webpack_require__(1362);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_d2_utilizr_lib_camelCaseToUnderscores__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_d2_utilizr_lib_camelCaseToUnderscores___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_d2_utilizr_lib_camelCaseToUnderscores__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__component_helpers_withStateFrom__ = __webpack_require__(201);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_material_ui_RaisedButton_RaisedButton__ = __webpack_require__(116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_material_ui_RaisedButton_RaisedButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_material_ui_RaisedButton_RaisedButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_rxjs__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_rxjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__store_Store__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__circular_progress_CircularProgress__ = __webpack_require__(83);\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getTranslationFormData(model) {\n    var translationStore = __WEBPACK_IMPORTED_MODULE_9__store_Store__[\"a\" /* default */].create();\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__translationForm_actions__[\"a\" /* getTranslationsForModel */])(model).subscribe(function (translations) {\n        translationStore.setState(translations);\n    });\n\n    return __WEBPACK_IMPORTED_MODULE_8_rxjs__[\"Observable\"].combineLatest(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__translationForm_actions__[\"b\" /* getLocales */])(), translationStore, function () {\n        for (var _len = arguments.length, data = Array(_len), _key = 0; _key < _len; _key++) {\n            data[_key] = arguments[_key];\n        }\n\n        return Object.assign.apply(Object, [{\n            objectToTranslate: model,\n            setTranslations: function setTranslations(translations) {\n                translationStore.setState({\n                    translations: translations\n                });\n            }\n        }].concat(data));\n    });\n}\n\nvar TranslationForm = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createClass({\n    displayName: 'TranslationForm',\n\n    propTypes: {\n        onTranslationSaved: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired,\n        onTranslationError: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired,\n        objectToTranslate: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.shape({\n            id: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string.isRequired\n        }),\n        fieldsToTranslate: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.arrayOf(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.string)\n    },\n\n    mixins: [__WEBPACK_IMPORTED_MODULE_2__i18n_Translate_mixin__[\"a\" /* default */]],\n\n    getInitialState: function getInitialState() {\n        return {\n            loading: true,\n            translations: {},\n            translationValues: {},\n            currentSelectedLocale: ''\n        };\n    },\n    getDefaultProps: function getDefaultProps() {\n        return {\n            fieldsToTranslate: ['name', 'shortName', 'description']\n        };\n    },\n    getLoadingdataElement: function getLoadingdataElement() {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { style: { textAlign: 'center' } },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10__circular_progress_CircularProgress__[\"a\" /* default */], { mode: 'indeterminate' })\n        );\n    },\n    renderFieldsToTranslate: function renderFieldsToTranslate() {\n        var _this = this;\n\n        return this.props.fieldsToTranslate.filter(function (fieldName) {\n            return fieldName;\n        }).map(function (fieldName) {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                { key: fieldName },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_material_ui_TextField_TextField___default.a, { floatingLabelText: _this.getTranslation(__WEBPACK_IMPORTED_MODULE_5_d2_utilizr_lib_camelCaseToUnderscores___default()(fieldName)),\n                    value: _this.getTranslationValueFor(fieldName),\n                    fullWidth: true,\n                    onChange: _this._setValue.bind(_this, fieldName)\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    null,\n                    _this.props.objectToTranslate[fieldName]\n                )\n            );\n        });\n    },\n    renderForm: function renderForm() {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            null,\n            this.renderFieldsToTranslate(),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7_material_ui_RaisedButton_RaisedButton___default.a, {\n                label: this.getTranslation('save'),\n                primary: true,\n                onClick: this._saveTranslations\n            }),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7_material_ui_RaisedButton_RaisedButton___default.a, {\n                style: { marginLeft: '1rem' },\n                label: this.getTranslation('cancel'),\n                onClick: this.props.onCancel\n            })\n        );\n    },\n    renderHelpText: function renderHelpText() {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            null,\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'p',\n                null,\n                this.getTranslation('select_a_locale_to_enter_translations_for_that_language')\n            )\n        );\n    },\n    render: function render() {\n        if (!this.props.locales && !this.props.translations) {\n            return this.getLoadingdataElement();\n        }\n\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { style: { minHeight: 250 } },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__i18n_LocaleSelector_component__[\"a\" /* default */], { locales: this.props.locales, onChange: this.setCurrentLocale }),\n            Boolean(this.state.currentSelectedLocale) ? this.renderForm() : this.renderHelpText()\n        );\n    },\n    getTranslationValueFor: function getTranslationValueFor(fieldName) {\n        var _this2 = this;\n\n        var translation = this.props.translations.find(function (t) {\n            return t.locale === _this2.state.currentSelectedLocale && t.property.toLowerCase() === __WEBPACK_IMPORTED_MODULE_5_d2_utilizr_lib_camelCaseToUnderscores___default()(fieldName);\n        });\n\n        if (translation) {\n            return translation.value;\n        }\n    },\n    setCurrentLocale: function setCurrentLocale(locale) {\n        this.setState({\n            currentSelectedLocale: locale\n        });\n    },\n    _setValue: function _setValue(property, event) {\n        var _this3 = this;\n\n        var newTranslations = [].concat(this.props.translations);\n        var translation = newTranslations.find(function (t) {\n            return t.locale === _this3.state.currentSelectedLocale && t.property.toLowerCase() === __WEBPACK_IMPORTED_MODULE_5_d2_utilizr_lib_camelCaseToUnderscores___default()(property);\n        });\n\n        if (translation) {\n            if (event.target.value) {\n                translation.value = event.target.value;\n            } else {\n                // Remove translation from the array\n                newTranslations = newTranslations.filter(function (t) {\n                    return t !== translation;\n                });\n            }\n        } else {\n            translation = {\n                property: __WEBPACK_IMPORTED_MODULE_5_d2_utilizr_lib_camelCaseToUnderscores___default()(property).toUpperCase(),\n                locale: this.state.currentSelectedLocale,\n                value: event.target.value\n            };\n\n            newTranslations.push(translation);\n        }\n\n        this.props.setTranslations(newTranslations);\n    },\n    _saveTranslations: function _saveTranslations() {\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__translationForm_actions__[\"c\" /* saveTranslations */])(this.props.objectToTranslate, this.props.translations).subscribe(this.props.onTranslationSaved, this.props.onTranslationError);\n    }\n});\n\n/* unused harmony default export */ var _unused_webpack_default_export = (TranslationForm);\n\nfunction getTranslationFormFor(model) {\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__component_helpers_withStateFrom__[\"a\" /* default */])(getTranslationFormData(model), TranslationForm);\n}\n\n/***/ }),\n\n/***/ 1362:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = getLocales;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getTranslationsForModel;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return saveTranslations; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__action_Action__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d2_lib_d2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs__);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n\n\n\n\n\nfunction getLocales() {\n    if (!getLocales.localePromise) {\n        getLocales.localePromise = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__[\"getInstance\"])().then(function (d2) {\n            var api = d2.Api.getApi();\n\n            return api.get('locales/db');\n        }).then(function (locales) {\n            return {\n                locales: locales\n            };\n        });\n    }\n\n    return __WEBPACK_IMPORTED_MODULE_2_rxjs__[\"Observable\"].fromPromise(getLocales.localePromise);\n}\n\nfunction getModelHref(model) {\n    if (model.href) {\n        return model.href;\n    }\n\n    return model.modelDefinition.apiEndpoint + '/' + model.id;\n}\n\nfunction getTranslationsForModel(model) {\n    return __WEBPACK_IMPORTED_MODULE_2_rxjs__[\"Observable\"].of(model).flatMap(function (model) {\n        var modelDefinition = model.modelDefinition;\n\n        if (!modelDefinition && !modelDefinition.name) {\n            return Promise.reject(new Error('Can not find modelDefinition for ' + model.id));\n        }\n\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__[\"getInstance\"])().then(function (d2) {\n            var api = d2.Api.getApi();\n\n            return api.get(getModelHref(model) + '/translations');\n        });\n    });\n}\n\nvar saveTranslations = __WEBPACK_IMPORTED_MODULE_0__action_Action__[\"a\" /* default */].create('saveTranslations');\n\nsaveTranslations.subscribe(function (_ref) {\n    var _ref$data = _slicedToArray(_ref.data, 2),\n        model = _ref$data[0],\n        translations = _ref$data[1],\n        complete = _ref.complete,\n        error = _ref.error;\n\n    var translationHref = getModelHref(model) + '/translations';\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_d2_lib_d2__[\"getInstance\"])().then(function (d2) {\n        var api = d2.Api.getApi();\n\n        api.update(translationHref, { translations: translations }, { dataType: 'text' }).then(complete).catch(error);\n    });\n});\n\n/***/ }),\n\n/***/ 1512:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_loglevel__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog__ = __webpack_require__(292);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton__ = __webpack_require__(116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_material_ui_Checkbox_Checkbox__ = __webpack_require__(211);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_material_ui_Checkbox_Checkbox___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_material_ui_Checkbox_Checkbox__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__forms_form_fields_drop_down__ = __webpack_require__(69);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Snackbar_snack_actions__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__modelToEditStore__ = __webpack_require__(117);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar styles = {\n    dialogContent: {\n        maxWidth: 'none'\n    },\n    dialogDiv: {\n        overflowX: 'auto',\n        overflowY: 'hidden'\n    },\n    table: {\n        borderSpacing: 0,\n        borderCollapse: 'collapse',\n        margin: '32px auto'\n    },\n    th: {\n        whiteSpace: 'nowrap',\n        textAlign: 'center',\n        border: '1px solid #e0e0e0',\n        padding: 6\n    },\n    thDataElements: {\n        whiteSpace: 'nowrap',\n        border: '1px solid #e0e0e0',\n        background: '#f0f0f0',\n        textAlign: 'left',\n        padding: 6\n    },\n    td: {\n        whiteSpace: 'nowrap',\n        padding: 2,\n        border: '1px solid #e0e0e0',\n        minWidth: 105\n    },\n    tdDataElement: {\n        whiteSpace: 'nowrap',\n        padding: 6,\n        border: '1px solid #e0e0e0'\n    }\n};\n\nvar GreyFieldDialog = function (_React$Component) {\n    _inherits(GreyFieldDialog, _React$Component);\n\n    function GreyFieldDialog(props, context) {\n        _classCallCheck(this, GreyFieldDialog);\n\n        var _this = _possibleConstructorReturn(this, (GreyFieldDialog.__proto__ || Object.getPrototypeOf(GreyFieldDialog)).call(this, props, context));\n\n        _this.state = {\n            categories: []\n        };\n\n        _this.closeDialog = _this.closeDialog.bind(_this);\n        _this.handleSaveClick = _this.handleSaveClick.bind(_this);\n\n        _this.getTranslation = context.d2.i18n.getTranslation.bind(context.d2.i18n);\n        return _this;\n    }\n\n    _createClass(GreyFieldDialog, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(props) {\n            var _this2 = this;\n\n            var d2 = this.context.d2;\n\n            if (props.sectionModel) {\n                var dataElements = props.sectionModel.dataElements.toArray();\n                if (dataElements.length < 1) {\n                    __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.info('Section ' + props.sectionModel.displayName + ' contains no data elements');\n                    __WEBPACK_IMPORTED_MODULE_7__Snackbar_snack_actions__[\"a\" /* default */].show({ message: this.getTranslation('this_section_has_no_data_elements'), action: 'ok' });\n                    this.props.onRequestClose();\n                    return;\n                }\n\n                var cocMap = {};\n\n                var categoryArrayToMap = function categoryArrayToMap(categories) {\n                    var appendage = null;\n\n                    var reduceAppendage = function reduceAppendage(prev, categoryOption) {\n                        var out = prev;\n                        out[categoryOption.id] = appendage;\n                        return out;\n                    };\n\n                    while (categories.length > 0) {\n                        appendage = categories.pop().categoryOptions.toArray().reduce(reduceAppendage, {});\n                    }\n                    return appendage;\n                };\n\n                var assignCocs = function assignCocs(cocMap, options, coc) {\n                    if (options.length > 0) {\n                        return Object.keys(cocMap).reduce(function (prev, key) {\n                            var out = prev;\n                            var keyPos = options.indexOf(key);\n                            if (keyPos !== -1) {\n                                options.splice(keyPos, 1);\n                                out[key] = assignCocs(cocMap[key], options, coc);\n                                return out;\n                            }\n                            out[key] = cocMap[key];\n                            return out;\n                        }, {});\n                    }\n                    return coc;\n                };\n\n                // Use the categoryCombos associated with the section to get categories and their category options\n                d2.models.categoryCombos.list({\n                    filter: 'id:in:[' + props.sectionModel.categoryCombos.toArray().map(function (coc) {\n                        return coc.id;\n                    }) + ']',\n                    paging: false,\n                    fields: ['id,displayName', 'categories[id,displayName,categoryOptions[id,displayName]]', 'categoryOptionCombos[id,displayName', 'categoryOptions[id,displayName]]'].join(',')\n                }).then(function (categoryCombos) {\n                    categoryCombos.forEach(function (categoryCombo) {\n                        // Build a nested map of categories:\n                        // { cat1_opt1 : { cat2_opt1: { cat3_opt1: null, cat3_opt2: null }, cat2_opt2: {...}, ... }, ... }\n                        //\n                        // Then convert to JSON and back as a fast way to remove any references within the structure\n                        Object.assign(cocMap, JSON.parse(JSON.stringify(categoryArrayToMap(categoryCombo.categories.toArray()))));\n\n                        // Fill in the leaf nodes in the cocMap with the actual coc's\n                        categoryCombo.categoryOptionCombos.toArray().forEach(function (coc) {\n                            var optionPath = coc.categoryOptions.toArray().map(function (o) {\n                                return o.id;\n                            });\n                            cocMap = assignCocs(cocMap, optionPath, { id: coc.id, displayName: coc.displayName });\n                        });\n                    });\n\n                    var greyedFields = props.sectionModel.greyedFields.reduce(function (prev, gf) {\n                        if (prev.hasOwnProperty(gf.dataElement.id)) {\n                            prev[gf.dataElement.id].push(gf.categoryOptionCombo.id);\n                            return prev;\n                        }\n\n                        var out = prev;\n                        out[gf.dataElement.id] = [gf.categoryOptionCombo.id];\n                        return out;\n                    }, {});\n\n                    _this2.setState({\n                        currentCategoryCombo: categoryCombos.toArray()[0].id,\n                        categoryCombos: categoryCombos,\n                        optionCount: categoryCombos.toArray().reduce(function (oc, cc) {\n                            oc[cc.id] = cc.categories.toArray().map(function (c) {\n                                return c.categoryOptions.size;\n                            });\n                            return oc;\n                        }, {}),\n                        cocMap: cocMap,\n                        greyedFields: greyedFields\n                    });\n                });\n            }\n        }\n    }, {\n        key: 'closeDialog',\n        value: function closeDialog() {\n            this.props.onRequestClose();\n        }\n    }, {\n        key: 'handleSaveClick',\n        value: function handleSaveClick() {\n            var _this3 = this;\n\n            var greyedFields = [];\n            Object.keys(this.state.greyedFields).forEach(function (dataElement) {\n                _this3.state.greyedFields[dataElement].forEach(function (coc) {\n                    greyedFields.push({\n                        dataElement: { id: dataElement },\n                        categoryOptionCombo: { id: coc }\n                    });\n                });\n            });\n\n            var section = Object.assign(this.props.sectionModel, { greyedFields: greyedFields });\n\n            section.save().then(function (res) {\n                __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.info('Section updated', res);\n                __WEBPACK_IMPORTED_MODULE_7__Snackbar_snack_actions__[\"a\" /* default */].show({ message: _this3.getTranslation('section_saved') });\n                _this3.props.onRequestSave(section);\n            }).catch(function (err) {\n                __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.error('Failed to save section:', err);\n                __WEBPACK_IMPORTED_MODULE_7__Snackbar_snack_actions__[\"a\" /* default */].show({ message: _this3.getTranslation('failed_to_save_section'), action: 'ok' });\n            });\n        }\n    }, {\n        key: 'renderTableHeader',\n        value: function renderTableHeader() {\n            var _this4 = this;\n\n            var prevRowColCount = 1;\n\n            return this.state.currentCategoryCombo && this.state.categoryCombos.get(this.state.currentCategoryCombo).categories.toArray().map(function (cat, catNum) {\n                var colSpan = _this4.state.optionCount[_this4.state.currentCategoryCombo].slice(catNum + 1).reduce(function (product, optionCount) {\n                    return optionCount * product;\n                }, 1);\n\n                var isLastHeader = catNum === _this4.state.categoryCombos.get(_this4.state.currentCategoryCombo).categories.size - 1;\n                var row = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'tr',\n                    { key: catNum },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        'th',\n                        { style: styles.thDataElements },\n                        isLastHeader && _this4.getTranslation('data_element')\n                    ),\n\n                    // For each column in the previous row...\n                    Array.apply(null, Array(prevRowColCount)).map(function (e, rep) {\n                        // ... render the columns for this row\n                        return cat.categoryOptions.toArray().map(function (opt, optNum) {\n                            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                                'th',\n                                { key: optNum + '.' + rep,\n                                    colSpan: colSpan,\n                                    style: styles.th\n                                },\n                                opt.displayName === 'default' ? '' : opt.displayName\n                            );\n                        });\n                    })\n                );\n                prevRowColCount *= cat.categoryOptions.size;\n                return row;\n            });\n        }\n    }, {\n        key: 'renderCheckbox',\n        value: function renderCheckbox(dataElement, fieldArray, fieldNum) {\n            var _this5 = this;\n\n            var resolveCoc = function resolveCoc(cocMap, fields) {\n                if (fields.length === 0) {\n                    return cocMap;\n                }\n\n                var field = fields.shift();\n                return resolveCoc(cocMap[field], fields);\n            };\n\n            var coc = resolveCoc(this.state.cocMap, fieldArray);\n\n            var isGreyed = this.state.greyedFields.hasOwnProperty(dataElement.id) && this.state.greyedFields[dataElement.id].indexOf(coc.id) !== -1;\n\n            var toggleBoggle = function (dataElementId, categoryOptionComboId, event, disable) {\n                _this5.setState(function (state) {\n                    var greyedCocs = (state.greyedFields[dataElementId] || []).slice();\n                    if (disable) {\n                        if (greyedCocs.includes(categoryOptionComboId)) {\n                            greyedCocs.splice(greyedCocs.indexOf(categoryOptionComboId), 1);\n                        }\n                    } else {\n                        if (!greyedCocs.includes(categoryOptionComboId)) {\n                            greyedCocs.push(categoryOptionComboId);\n                        }\n                    }\n\n                    var greyedFields = Object.keys(state.greyedFields).reduce(function (prev, deId) {\n                        var out = prev;\n                        out[deId] = deId === dataElementId ? greyedCocs : state.greyedFields[deId];\n                        return out;\n                    }, {});\n\n                    if (greyedCocs.length > 0 && !greyedFields.hasOwnProperty(dataElementId)) {\n                        greyedFields[dataElementId] = greyedCocs;\n                    }\n\n                    return { greyedFields: greyedFields };\n                });\n            }.bind(this, dataElement.id, coc.id);\n\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'td',\n                { key: fieldNum, style: styles.td },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_material_ui_Checkbox_Checkbox___default.a, {\n                    checked: !isGreyed,\n                    label: isGreyed ? this.getTranslation('disabled') : this.getTranslation('enabled'),\n                    labelPosition: 'right',\n                    labelStyle: { whiteSpace: 'nowrap' },\n                    onCheck: toggleBoggle\n                })\n            );\n        }\n    }, {\n        key: 'renderDataElements',\n        value: function renderDataElements() {\n            var _this6 = this;\n\n            var getCocFields = function getCocFields() {\n                return _this6.state.categoryCombos.get(_this6.state.currentCategoryCombo).categories.toArray().reduce(function (prev, cat) {\n                    if (prev.length > 0) {\n                        var out = [];\n                        prev.forEach(function (p) {\n                            cat.categoryOptions.toArray().forEach(function (opt) {\n                                var pout = p.slice();\n                                pout.push(opt.id);\n                                out.push(pout);\n                            });\n                        });\n                        return out;\n                    }\n\n                    cat.categoryOptions.toArray().forEach(function (opt) {\n                        prev.push([opt.id]);\n                    });\n                    return prev;\n                }, []);\n            };\n\n            var currentSectionDataElementIds = this.props.sectionModel.dataElements.toArray().map(function (de) {\n                return de.id;\n            });\n            return this.state.currentCategoryCombo ? __WEBPACK_IMPORTED_MODULE_8__modelToEditStore__[\"a\" /* default */].state.dataSetElements.filter(function (dse) {\n                return currentSectionDataElementIds.includes(dse.dataElement.id);\n            }).filter(function (dse) {\n                return (dse.categoryCombo ? dse.categoryCombo.id : dse.dataElement.categoryCombo.id) === _this6.state.currentCategoryCombo;\n            }).sort(function (a, b) {\n                return currentSectionDataElementIds.indexOf(a.dataElement.id) - currentSectionDataElementIds.indexOf(b.dataElement.id);\n            }).map(function (dse, deNum) {\n                var cocFields = getCocFields();\n                return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'tr',\n                    { key: deNum, style: { background: deNum % 2 === 0 ? 'none' : '#f0f0f0' } },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        'td',\n                        { style: styles.tdDataElement },\n                        dse.dataElement.displayName\n                    ),\n                    cocFields.map(function (fields, fieldNum) {\n                        return _this6.renderCheckbox(dse.dataElement, fields, fieldNum);\n                    })\n                );\n            }) : null;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this7 = this;\n\n            var title = this.props.sectionModel.displayName;\n\n            var _props = this.props,\n                open = _props.open,\n                extraProps = _objectWithoutProperties(_props, ['open']);\n\n            var uniqueCatComboIds = [],\n                sectionDataElementIds = [],\n                categoryCombosForSection = [];\n\n            if (this.props.sectionModel) {\n                // Get data element ids for the current section\n                sectionDataElementIds = this.props.sectionModel.dataElements.toArray().map(function (de) {\n                    return de.id;\n                });\n\n                // Get unique cat combos for data elements in current section\n                categoryCombosForSection = __WEBPACK_IMPORTED_MODULE_8__modelToEditStore__[\"a\" /* default */].state.dataSetElements.filter(function (dse) {\n                    return sectionDataElementIds.includes(dse.dataElement.id);\n                }).map(function (dse) {\n                    return dse.categoryCombo || dse.dataElement.categoryCombo;\n                }).reduce(function (catCombos, catCombo) {\n                    if (!uniqueCatComboIds.includes(catCombo.id)) {\n                        uniqueCatComboIds.push(catCombo.id);\n                        catCombos.push(catCombo);\n                    }\n                    return catCombos;\n                }, []).sort(function (a, b) {\n                    return a.displayName.localeCompare(b.displayName);\n                });\n            }\n\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog___default.a,\n                _extends({\n                    autoScrollBodyContent: true,\n                    autoDetectWindowHeight: true,\n                    title: this.getTranslation('manage_grey_fields') + ': ' + title,\n                    style: { maxWidth: 'none' },\n                    contentStyle: styles.dialogContent,\n                    open: open && this.props.sectionModel.dataElements.size > 0\n                }, extraProps, {\n                    actions: [__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton___default.a, {\n                        label: this.getTranslation('cancel'),\n                        onTouchTap: this.closeDialog,\n                        style: { marginRight: 16 }\n                    }), __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton___default.a, {\n                        primary: true,\n                        label: this.getTranslation('save'),\n                        onTouchTap: this.handleSaveClick\n                    })],\n                    onRequestClose: this.closeDialog\n                }),\n                this.props.sectionModel && this.props.sectionModel.categoryCombos && this.props.sectionModel.categoryCombos.size > 1 ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__forms_form_fields_drop_down__[\"a\" /* default */], {\n                    options: categoryCombosForSection.map(function (cc) {\n                        return {\n                            value: cc.id,\n                            text: cc.displayName === 'default' ? _this7.getTranslation('none') : cc.displayName\n                        };\n                    }),\n                    labelText: this.getTranslation('category_combo'),\n                    value: this.state.currentCategoryCombo,\n                    onChange: function onChange(e) {\n                        return _this7.setState({\n                            currentCategoryCombo: e.target.value\n                        });\n                    },\n                    style: { width: '33%' },\n                    isRequired: true\n                }) : null,\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    { style: styles.dialogDiv },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        'table',\n                        { style: styles.table },\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                            'tbody',\n                            null,\n                            this.renderTableHeader(),\n                            this.state.currentCategoryCombo && this.props.sectionModel && this.renderDataElements()\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return GreyFieldDialog;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);\n\nGreyFieldDialog.contextTypes = { d2: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.any.isRequired };\nGreyFieldDialog.propTypes = {\n    open: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.bool.isRequired,\n    sectionModel: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.any.isRequired,\n    onRequestClose: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired,\n    onRequestSave: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GreyFieldDialog);\n\n/***/ }),\n\n/***/ 1513:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_loglevel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_loglevel__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog__ = __webpack_require__(292);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton__ = __webpack_require__(116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_material_ui_TextField_TextField__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_material_ui_TextField_TextField___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_material_ui_TextField_TextField__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_group_editor_GroupEditorWithOrdering_component__ = __webpack_require__(533);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_store_Store__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_material_ui_Checkbox__ = __webpack_require__(163);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_material_ui_Checkbox___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_material_ui_Checkbox__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__forms_form_fields_drop_down__ = __webpack_require__(69);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__Snackbar_snack_actions__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__modelToEditStore__ = __webpack_require__(117);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar dataElementStore = __WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_store_Store__[\"a\" /* default */].create();\nvar assignedDataElementStore = __WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_store_Store__[\"a\" /* default */].create();\nvar indicatorStore = __WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_store_Store__[\"a\" /* default */].create();\nvar assignedIndicatorStore = __WEBPACK_IMPORTED_MODULE_7_d2_ui_lib_store_Store__[\"a\" /* default */].create();\n\nvar SectionDialog = function (_React$Component) {\n    _inherits(SectionDialog, _React$Component);\n\n    function SectionDialog(props, context) {\n        _classCallCheck(this, SectionDialog);\n\n        var _this = _possibleConstructorReturn(this, (SectionDialog.__proto__ || Object.getPrototypeOf(SectionDialog)).call(this, props, context));\n\n        _this.state = {\n            categoryCombo: false\n        };\n        dataElementStore.setState([]);\n        assignedDataElementStore.setState([]);\n        indicatorStore.setState([]);\n        assignedIndicatorStore.setState([]);\n\n        _this.handleCategoryComboChange = _this.handleCategoryComboChange.bind(_this);\n        _this.handleFilterChange = _this.handleFilterChange.bind(_this);\n        _this.handleNameChange = _this.handleNameChange.bind(_this);\n        _this.handleCodeChange = _this.handleCodeChange.bind(_this);\n        _this.handleDescriptionChange = _this.handleDescriptionChange.bind(_this);\n        _this.assignDataElements = _this.assignDataElements.bind(_this);\n        _this.removeDataElements = _this.removeDataElements.bind(_this);\n        _this.setAssignedDataElements = _this.setAssignedDataElements.bind(_this);\n        _this.assignIndicators = _this.assignIndicators.bind(_this);\n        _this.removeIndicators = _this.removeIndicators.bind(_this);\n        _this.setAssignedIndicators = _this.setAssignedIndicators.bind(_this);\n        _this.saveSection = _this.saveSection.bind(_this);\n\n        _this.handleRowTotalsChange = function (e, value) {\n            _this.setState({ showRowTotals: value });\n        };\n        _this.handleColumnTotalsChange = function (e, value) {\n            _this.setState({ showColumnTotals: value });\n        };\n\n        _this.getTranslation = context.d2.i18n.getTranslation.bind(context.d2.i18n);\n        return _this;\n    }\n\n    _createClass(SectionDialog, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            this.subscriptions = [];\n            this.subscriptions.push(assignedDataElementStore.subscribe(function () {\n                _this2.forceUpdate();\n            }));\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(props) {\n            var _this3 = this;\n\n            if (props.sectionModel) {\n                var currentSectionId = props.sectionModel.id;\n                var sections = __WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].state.sections;\n                var sectionArray = Array.isArray(sections) ? sections : sections.toArray();\n                var otherSections = sectionArray.filter(function (s) {\n                    return s.id !== currentSectionId;\n                });\n                var filterDataElementIds = otherSections.reduce(function (elements, section) {\n                    return elements.concat((Array.isArray(section.dataElements) ? section.dataElements : section.dataElements.toArray()).map(function (de) {\n                        return de.id;\n                    }));\n                }, []);\n\n                // Default category combo filter = no filter\n                var categoryComboId = false;\n\n                assignedDataElementStore.setState(props.sectionModel.dataElements && props.sectionModel.dataElements.toArray().map(function (de) {\n                    return de.id;\n                }) || []);\n\n                indicatorStore.setState(__WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].state.indicators.toArray().map(function (i) {\n                    return { value: i.id, text: i.displayName };\n                }).sort(function (a, b) {\n                    return a.text.localeCompare(b.text);\n                }));\n                assignedIndicatorStore.setState(props.sectionModel.indicators && props.sectionModel.indicators.toArray().map(function (i) {\n                    return i.id;\n                }) || []);\n\n                this.setState({\n                    name: props.sectionModel.name,\n                    code: props.sectionModel.code,\n                    nameError: '',\n                    codeError: '',\n                    description: props.sectionModel.description,\n                    showRowTotals: props.sectionModel.showRowTotals,\n                    showColumnTotals: props.sectionModel.showColumnTotals,\n                    filterText: '',\n                    filterDataElementIds: filterDataElementIds\n                }, function () {\n                    _this3.handleCategoryComboChange({ target: { value: categoryComboId } });\n                    _this3.forceUpdate();\n                });\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.subscriptions.forEach(function (disposable) {\n                return disposable.unsubscribe();\n            });\n        }\n    }, {\n        key: 'handleCategoryComboChange',\n        value: function handleCategoryComboChange(event) {\n            var _this4 = this;\n\n            var categoryComboId = event.target.value;\n\n            if (__WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].state.dataSetElements) {\n                dataElementStore.setState(__WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].state.dataSetElements.filter(function (dse) {\n                    if (categoryComboId) {\n                        return dse.categoryCombo ? dse.categoryCombo.id === categoryComboId : dse.dataElement.categoryCombo.id === categoryComboId;\n                    }\n                    return true;\n                }).filter(function (dse) {\n                    return _this4.state.filterDataElementIds ? !_this4.state.filterDataElementIds.includes(dse.dataElement.id) : true;\n                }).map(function (dse) {\n                    return { value: dse.dataElement.id, text: dse.dataElement.displayName };\n                }).sort(function (a, b) {\n                    return a.text.localeCompare(b.text);\n                }));\n            }\n\n            this.setState({\n                categoryCombo: categoryComboId\n            });\n        }\n    }, {\n        key: 'handleFilterChange',\n        value: function handleFilterChange(e) {\n            this.setState({ filterText: e.target.value });\n        }\n    }, {\n        key: 'handleNameChange',\n        value: function handleNameChange(e) {\n            var _this5 = this;\n\n            var sectionArray = Array.isArray(__WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].getState().sections) ? __WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].getState().sections : __WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].getState().sections.toArray();\n            var nameDupe = sectionArray.filter(function (s) {\n                return s.id !== _this5.props.sectionModel.id;\n            }).reduce(function (res, s) {\n                return res || s.name === e.target.value;\n            }, false);\n\n            this.setState({ name: e.target.value, nameError: nameDupe ? this.getTranslation('value_not_unique') : '' });\n        }\n    }, {\n        key: 'handleCodeChange',\n        value: function handleCodeChange(e) {\n            var _this6 = this;\n\n            var sectionArray = Array.isArray(__WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].getState().sections) ? __WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].getState().sections : __WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].getState().sections.toArray();\n            var codeDupe = sectionArray.filter(function (s) {\n                return s.id !== _this6.props.sectionModel.id;\n            }).reduce(function (res, s) {\n                return res || s.code && s.code === e.target.value;\n            }, false);\n\n            this.setState({ code: e.target.value, codeError: codeDupe ? this.getTranslation('value_not_unique') : '' });\n        }\n    }, {\n        key: 'handleDescriptionChange',\n        value: function handleDescriptionChange(e) {\n            this.setState({ description: e.target.value });\n        }\n    }, {\n        key: 'assignDataElements',\n        value: function assignDataElements(dataElements) {\n            assignedDataElementStore.setState(assignedDataElementStore.state.concat(dataElements));\n            return Promise.resolve();\n        }\n    }, {\n        key: 'removeDataElements',\n        value: function removeDataElements(dataElements) {\n            assignedDataElementStore.setState(assignedDataElementStore.state.filter(function (de) {\n                return dataElements.indexOf(de) === -1;\n            }));\n            return Promise.resolve();\n        }\n    }, {\n        key: 'setAssignedDataElements',\n        value: function setAssignedDataElements(dataElements) {\n            assignedDataElementStore.setState(dataElements);\n        }\n    }, {\n        key: 'assignIndicators',\n        value: function assignIndicators(indicators) {\n            assignedIndicatorStore.setState(assignedIndicatorStore.state.concat(indicators));\n            return Promise.resolve();\n        }\n    }, {\n        key: 'removeIndicators',\n        value: function removeIndicators(indicators) {\n            assignedIndicatorStore.setState(assignedIndicatorStore.state.filter(function (i) {\n                return indicators.indexOf(i) === -1;\n            }));\n            return Promise.resolve();\n        }\n    }, {\n        key: 'setAssignedIndicators',\n        value: function setAssignedIndicators(indicators) {\n            assignedIndicatorStore.setState(indicators);\n        }\n    }, {\n        key: 'saveSection',\n        value: function saveSection() {\n            var _this7 = this;\n\n            if (!this.state.name || this.state.name.trim().length === 0) {\n                __WEBPACK_IMPORTED_MODULE_10__Snackbar_snack_actions__[\"a\" /* default */].show({\n                    message: this.getTranslation('name_is_required'),\n                    action: this.getTranslation('ok')\n                });\n                return;\n            }\n\n            var sectionModel = this.props.sectionModel.id ? this.props.sectionModel : this.props.sectionModel.modelDefinition.create();\n            Object.assign(sectionModel, {\n                dataSet: { id: __WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].state.id },\n                name: this.state.name,\n                code: this.state.code,\n                description: this.state.description,\n                showRowTotals: this.state.showRowTotals,\n                showColumnTotals: this.state.showColumnTotals,\n                dataElements: assignedDataElementStore.state.map(function (de) {\n                    return { id: de };\n                }),\n                indicators: assignedIndicatorStore.state.map(function (i) {\n                    return { id: i };\n                }),\n                sortOrder: this.props.sectionModel.sortOrder || __WEBPACK_IMPORTED_MODULE_11__modelToEditStore__[\"a\" /* default */].state.sections.toArray().reduce(function (prev, s) {\n                    return Math.max(prev, s.sortOrder + 1);\n                }, 0)\n            });\n            sectionModel.save().then(function (res) {\n                __WEBPACK_IMPORTED_MODULE_10__Snackbar_snack_actions__[\"a\" /* default */].show({ message: _this7.getTranslation('section_saved') });\n                _this7.context.d2.models.sections.get(res.response.uid, {\n                    fields: [':all,dataElements[id,categoryCombo[id,displayName]]', 'greyedFields[categoryOptionCombo,dataElement]'].join(',')\n                }).then(function (section) {\n                    _this7.props.onSaveSection(section);\n                });\n            }).catch(function (err) {\n                __WEBPACK_IMPORTED_MODULE_1_loglevel___default.a.warn('Failed to save section:', err);\n                __WEBPACK_IMPORTED_MODULE_10__Snackbar_snack_actions__[\"a\" /* default */].show({\n                    message: _this7.getTranslation('failed_to_save_section'),\n                    action: _this7.getTranslation('ok')\n                });\n            });\n        }\n    }, {\n        key: 'renderFilters',\n        value: function renderFilters() {\n            var catCombos = [{ value: false, text: this.getTranslation('no_filter') }].concat(this.props.categoryCombos.sort(function (a, b) {\n                return a.text.localeCompare(b.text);\n            }));\n\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                { style: { minWidth: 605 } },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__forms_form_fields_drop_down__[\"a\" /* default */], {\n                    options: catCombos,\n                    labelText: this.getTranslation('category_combo_filter'),\n                    onChange: this.handleCategoryComboChange,\n                    value: this.state.categoryCombo,\n                    isRequired: true,\n                    disabled: this.props.categoryCombos.length === 1,\n                    style: { width: 284 }\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_material_ui_TextField_TextField___default.a, {\n                    floatingLabelText: this.getTranslation('filter'),\n                    onChange: this.handleFilterChange,\n                    style: { float: 'right', marginRight: 34, width: 284 }\n                })\n            );\n        }\n    }, {\n        key: 'renderAvailableOptions',\n        value: function renderAvailableOptions() {\n            var labelStyle = {\n                position: 'relative',\n                display: 'block',\n                width: '100%',\n                lineHeight: '24px',\n                color: 'rgba(0,0,0,0.3)',\n                marginTop: '1.25rem',\n                fontSize: 16\n            };\n\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                null,\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    { style: { marginBottom: 80 } },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        'label',\n                        { style: labelStyle },\n                        this.getTranslation('data_elements')\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_group_editor_GroupEditorWithOrdering_component__[\"a\" /* default */], {\n                        itemStore: dataElementStore,\n                        assignedItemStore: assignedDataElementStore,\n                        onAssignItems: this.assignDataElements,\n                        onRemoveItems: this.removeDataElements,\n                        onOrderChanged: this.setAssignedDataElements,\n                        height: 250,\n                        filterText: this.state.filterText\n                    })\n                ),\n                indicatorStore.state.length ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    { style: { marginBottom: 80 } },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        'label',\n                        { style: labelStyle },\n                        this.getTranslation('indicators')\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_d2_ui_lib_group_editor_GroupEditorWithOrdering_component__[\"a\" /* default */], {\n                        itemStore: indicatorStore,\n                        assignedItemStore: assignedIndicatorStore,\n                        onAssignItems: this.assignIndicators,\n                        onRemoveItems: this.removeIndicators,\n                        onOrderChanged: this.setAssignedIndicators,\n                        height: 250,\n                        filterText: this.state.filterText\n                    })\n                ) : null\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this8 = this;\n\n            var title = this.getTranslation('add_section');\n            var sectionIdDiv = null;\n\n            if (this.props.sectionModel.id) {\n                title = this.getTranslation('edit_section');\n                sectionIdDiv = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'div',\n                    { style: { float: 'left', padding: 8, color: 'rgba(0,0,0,0.5)' } },\n                    this.getTranslation('section_id'),\n                    ':',\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        'span',\n                        { style: { fontFamily: 'monospace' } },\n                        this.props.sectionModel.id\n                    )\n                );\n            }\n\n            var validateName = function validateName(e) {\n                _this8.setState({ nameError: e.target.value.trim().length > 0 ? '' : _this8.getTranslation('value_required') });\n            };\n\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_2_material_ui_Dialog_Dialog___default.a,\n                _extends({\n                    autoScrollBodyContent: true,\n                    title: title,\n                    actions: [sectionIdDiv, __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_material_ui_FlatButton_FlatButton___default.a, {\n                        label: this.getTranslation('cancel'),\n                        onTouchTap: this.props.onRequestClose,\n                        style: { marginRight: 24 }\n                    }), __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_material_ui_RaisedButton_RaisedButton___default.a, {\n                        primary: true,\n                        label: this.getTranslation('save'),\n                        onTouchTap: this.saveSection\n                    })]\n                }, this.props),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_material_ui_TextField_TextField___default.a, {\n                    floatingLabelText: this.getTranslation('name') + ' *',\n                    value: this.state.name || '',\n                    style: { width: '100%' },\n                    onChange: this.handleNameChange,\n                    errorText: this.state.nameError,\n                    onBlur: validateName\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_material_ui_TextField_TextField___default.a, {\n                    floatingLabelText: this.getTranslation('code'),\n                    value: this.state.code || '',\n                    style: { width: '100%' },\n                    onChange: this.handleCodeChange,\n                    errorText: this.state.codeError\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_material_ui_TextField_TextField___default.a, {\n                    floatingLabelText: this.getTranslation('description'),\n                    value: this.state.description || '',\n                    style: { width: '100%' },\n                    multiLine: true,\n                    onChange: this.handleDescriptionChange\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_material_ui_Checkbox___default.a, {\n                    label: this.getTranslation('show_row_totals'),\n                    checked: this.state.showRowTotals,\n                    style: { margin: '16px 0' },\n                    onCheck: this.handleRowTotalsChange\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_material_ui_Checkbox___default.a, {\n                    label: this.getTranslation('show_column_totals'),\n                    checked: this.state.showColumnTotals,\n                    style: { margin: '16px 0' },\n                    onCheck: this.handleColumnTotalsChange\n                }),\n                this.renderFilters(),\n                this.renderAvailableOptions()\n            );\n        }\n    }]);\n\n    return SectionDialog;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);\n\nSectionDialog.propTypes = {\n    open: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.bool.isRequired,\n    sectionModel: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.any.isRequired,\n    categoryCombos: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.array.isRequired,\n    onRequestClose: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired,\n    onSaveSection: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.func.isRequired\n};\nSectionDialog.contextTypes = {\n    d2: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.any.isRequired\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SectionDialog);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 8-7b4b72284bb16785357b.js","import React from 'react';\nimport log from 'loglevel';\n\nimport LoadingMask from 'd2-ui/lib/loading-mask/LoadingMask.component';\nimport Heading from 'd2-ui/lib/headings/Heading.component';\nimport DataTable from 'd2-ui/lib/data-table/DataTable.component';\nimport FloatingActionButton from 'material-ui/FloatingActionButton/FloatingActionButton';\nimport FontIcon from 'material-ui/FontIcon/FontIcon';\n\nimport SectionDialog from './SectionDialog.component';\nimport GreyFieldDialog from './GreyFieldDialog.component';\n\nimport snackActions from '../Snackbar/snack.actions';\nimport modelToEditStore from './modelToEditStore';\n\nimport TranslationDialog from 'd2-ui/lib/i18n/TranslationDialog.component';\n\nconst styles = {\n    heading: {\n        paddingBottom: 18,\n    },\n    fab: {\n        textAlign: 'right',\n        marginTop: '1rem',\n        bottom: '1.5rem',\n        right: '1.5rem',\n        position: 'fixed',\n        zIndex: 10,\n    },\n};\n\nclass EditDataSetSections extends React.Component {\n    constructor(props, context) {\n        super(props, context);\n\n        this.state = {\n            categoryCombos: null,\n            editSectionModel: false,\n            greyFieldSectionModel: false,\n        };\n\n        Promise.all([\n            context.d2.Api.getApi().get(\n                ['dataSets', props.params.modelId, 'categoryCombos'].join('/'),\n                { fields: 'id,displayName', paging: false }\n            ),\n        ]).then(([catComboList]) => {\n            this.setState({\n                sections: modelToEditStore.state.sections.toArray().sort((a, b) => a.sortOrder - b.sortOrder),\n                categoryCombos: catComboList.categoryCombos.map(cc => ({\n                    value: cc.id,\n                    text: cc.displayName === 'default' ? this.getTranslation('none') : cc.displayName,\n                })),\n            });\n        });\n\n        this.handleAddSectionClick = this.handleAddSectionClick.bind(this);\n        this.handleEditSectionClick = this.handleEditSectionClick.bind(this);\n        this.handleSectionSaved = this.handleSectionSaved.bind(this);\n\n        this.handleDeleteSectionClick = this.handleDeleteSectionClick.bind(this);\n        this.handleTranslateSectionClick = this.handleTranslateSectionClick.bind(this);\n        this.handleTranslationSaved = this.handleTranslationSaved.bind(this);\n        this.handleTranslationErrored = this.handleTranslationErrored.bind(this);\n\n        this.handleSectionGreyFieldsClick = this.handleSectionGreyFieldsClick.bind(this);\n\n        this.swapSections = this.swapSections.bind(this);\n        this.moveSectionUp = this.moveSectionUp.bind(this);\n        this.moveSectionDown = this.moveSectionDown.bind(this);\n\n        this.getTranslation = context.d2.i18n.getTranslation.bind(context.d2.i18n);\n    }\n\n    handleAddSectionClick() {\n        const newSection = this.context.d2.models.sections.create();\n        this.setState(state => ({\n            editSectionModel: Object.assign(newSection, {\n                dataSet: { id: modelToEditStore.state.id },\n                sortOrder: state.sections.reduce((p, s) => Math.max(s.sortOrder, p), 0) + 1,\n            })\n        }));\n    }\n\n    handleEditSectionClick(editSectionModel) {\n        this.setState({ editSectionModel });\n    }\n\n    handleSectionSaved(savedSection) {\n        this.setState(state => {\n            let replaced = false;\n            const sections = state.sections\n                .map(s => {\n                    if (s.id === savedSection.id) {\n                        replaced = true;\n                        return savedSection;\n                    }\n                    return s;\n                })\n                .sort((a, b) => a.sortOrder - b.sortOrder);\n            if (!replaced) {\n                sections.push(savedSection);\n            }\n\n            modelToEditStore.setState(Object.assign(modelToEditStore.state, { sections }));\n            return {\n                editSectionModel: false,\n                greyFieldSectionModel: false,\n                sections,\n            };\n        }, () => {\n            this.forceUpdate();\n        });\n    }\n\n    handleDeleteSectionClick(section) {\n        snackActions.show({\n            message: `${this.getTranslation('confirm_delete_section')} ${section.displayName}`,\n            action: 'confirm',\n            onActionTouchTap: () => {\n                section.delete()\n                    .then(() => {\n                        const newSections = modelToEditStore.state.sections;\n                        modelToEditStore.setState(Object.assign(modelToEditStore.state, {\n                            sections: (Array.isArray(newSections) ? newSections : newSections.toArray()).filter(s => s.id !== section.id),\n                        }));\n\n                        snackActions.show({ message: this.getTranslation('section_deleted') });\n                        this.setState(state => ({\n                            sections: state.sections.filter(s => s.id !== section.id),\n                        }));\n                    })\n                    .catch(err => {\n                        snackActions.show({ message: this.getTranslation('failed_to_delete_section'), action: 'ok' });\n                        log.warn('Failed to delete section', err);\n                    });\n            }\n        });\n    }\n\n    handleTranslateSectionClick(section) {\n        this.setState({\n            translationModel: section,\n        });\n    }\n\n    handleTranslationSaved() {\n        snackActions.show({ message: 'translation_saved', translate: true });\n    }\n\n    handleTranslationErrored(errorMessage) {\n        log.error(errorMessage);\n        snackActions.show({ message: 'translation_save_error', action: 'ok', translate: true });\n    }\n\n    handleSectionGreyFieldsClick(section) {\n        this.setState({ greyFieldSectionModel: section });\n    }\n\n    swapSections(sectionA, sectionB) {\n        this.setState(state => {\n            const swapOrder = sectionA.sortOrder;\n            sectionA.sortOrder = sectionB.sortOrder; // eslint-disable-line\n            sectionB.sortOrder = swapOrder; // eslint-disable-line\n\n            Promise.all([\n                sectionA.save(),\n                sectionB.save(),\n            ])\n                .then(() => {\n                    snackActions.show({ message: this.getTranslation('section_moved') });\n                })\n                .catch(err => {\n                    log.warn('Failed to swap sections:', err);\n                    snackActions.show({ message: this.getTranslation('failed_to_move_section'), action: 'ok' });\n                });\n\n            return {\n                sections: state.sections.sort((a, b) => a.sortOrder - b.sortOrder),\n            };\n        });\n    }\n\n    moveSectionUp(section) {\n        const currentIndex = this.state.sections.indexOf(section);\n        if (currentIndex > 0) {\n            const swapSection = this.state.sections[currentIndex - 1];\n            this.swapSections(swapSection, section);\n        }\n    }\n\n    moveSectionDown(section) {\n        const currentIndex = this.state.sections.indexOf(section);\n        if (currentIndex < this.state.sections.length - 1) {\n            const swapSection = this.state.sections[currentIndex + 1];\n            this.swapSections(swapSection, section);\n        }\n    }\n\n    render() {\n        const contextActions = {\n            edit: this.handleEditSectionClick,\n            delete: this.handleDeleteSectionClick,\n            translate: this.handleTranslateSectionClick,\n            manage_grey_fields: this.handleSectionGreyFieldsClick,\n            move_up: this.moveSectionUp,\n            move_down: this.moveSectionDown,\n        };\n\n        const contextMenuIcons = {\n            edit: 'edit',\n            move_up: 'arrow_upward',\n            move_down: 'arrow_downward',\n            manage_grey_fields: 'do_not_disturb',\n        };\n\n        const contextActionChecker = (model, action) => {\n            if (action === 'move_up') {\n                return this.state.sections.indexOf(model) > 0;\n            } else if (action === 'move_down') {\n                return this.state.sections.indexOf(model) < this.state.sections.length - 1;\n            }\n\n            return true;\n        };\n\n        return this.state.sections === undefined ? <LoadingMask /> : (\n            <div>\n                <Heading style={styles.heading}>\n                    {modelToEditStore.state.displayName} {this.getTranslation('section_management')}\n                </Heading>\n                <DataTable\n                    columns={['name']}\n                    rows={this.state.sections}\n                    contextMenuActions={contextActions}\n                    contextMenuIcons={contextMenuIcons}\n                    primaryAction={contextActions.edit}\n                    isContextActionAllowed={contextActionChecker}\n                />\n                <SectionDialog\n                    open={!!this.state.editSectionModel}\n                    sectionModel={this.state.editSectionModel}\n                    categoryCombos={this.state.categoryCombos}\n                    onRequestClose={() => { this.setState({ editSectionModel: false }); }}\n                    onSaveSection={this.handleSectionSaved}\n                />\n                <GreyFieldDialog\n                    open={!!this.state.greyFieldSectionModel}\n                    sectionModel={this.state.greyFieldSectionModel}\n                    onRequestClose={() => { this.setState({ greyFieldSectionModel: false }); }}\n                    onRequestSave={this.handleSectionSaved}\n                />\n                {this.state.translationModel ? <TranslationDialog\n                    objectToTranslate={this.state.translationModel}\n                    objectTypeToTranslate={this.state.translationModel && this.state.translationModel.modelDefinition}\n                    open={!!this.state.translationModel}\n                    onTranslationSaved={this.handleTranslationSaved}\n                    onTranslationError={this.handleTranslationErrored}\n                    onRequestClose={() => { this.setState({ translationModel: null }); }}\n                    fieldsToTranslate={['name']}\n                /> : null }\n                <div style={styles.fab}>\n                    <FloatingActionButton onClick={this.handleAddSectionClick}>\n                        <FontIcon className=\"material-icons\">add</FontIcon>\n                    </FloatingActionButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nEditDataSetSections.propTypes = {\n    params: React.PropTypes.any.isRequired,\n};\nEditDataSetSections.contextTypes = {\n    d2: React.PropTypes.any.isRequired,\n};\n\nexport default EditDataSetSections;\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/EditDataSetSections.component.js","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport React from 'react';\nimport SelectField from 'material-ui/SelectField/SelectField';\nimport MenuItem from 'material-ui/MenuItem/MenuItem';\n\nimport Translate from '../i18n/Translate.mixin';\n\nexport default React.createClass({\n    displayName: 'LocaleSelector.component',\n\n    propTypes: {\n        value: React.PropTypes.string,\n        locales: React.PropTypes.arrayOf(React.PropTypes.shape({\n            name: React.PropTypes.string.isRequired,\n            locale: React.PropTypes.string.isRequired\n        })).isRequired,\n        onChange: React.PropTypes.func.isRequired\n    },\n\n    mixins: [Translate],\n\n    render: function render() {\n        var localeMenuItems = [{ payload: '', text: '' }].concat(this.props.locales).map(function (locale, index) {\n            return React.createElement(MenuItem, {\n                key: index,\n                primaryText: locale.name,\n                value: locale.locale\n            });\n        });\n\n        return React.createElement(\n            SelectField,\n            _extends({\n                fullWidth: true\n            }, this.props, {\n                value: this.state && this.state.locale,\n                hintText: this.getTranslation('select_locale'),\n                onChange: this._localeChange\n            }),\n            localeMenuItems\n        );\n    },\n    _localeChange: function _localeChange(event, index, locale) {\n        this.setState({\n            locale: locale\n        });\n\n        this.props.onChange(locale, event);\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/d2-ui/lib/i18n/LocaleSelector.component.js\n// module id = 1359\n// module chunks = 2 3 4 7 8","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport { config } from 'd2/lib/d2';\nimport Dialog from 'material-ui/Dialog/Dialog';\nimport React, { PropTypes, Component } from 'react';\nimport { getTranslationFormFor } from './TranslationForm.component';\n\nconfig.i18n.strings.add('close');\nconfig.i18n.strings.add('sharing_settings');\n\nvar TranslationDialog = function (_Component) {\n    _inherits(TranslationDialog, _Component);\n\n    function TranslationDialog(props, context) {\n        _classCallCheck(this, TranslationDialog);\n\n        var _this = _possibleConstructorReturn(this, (TranslationDialog.__proto__ || Object.getPrototypeOf(TranslationDialog)).call(this, props, context));\n\n        _this.i18n = context.d2.i18n;\n\n        _this.state = {\n            TranslationForm: getTranslationFormFor(_this.props.objectToTranslate)\n        };\n\n        _this.translationSaved = _this.translationSaved.bind(_this);\n        _this.translationError = _this.translationError.bind(_this);\n        _this.closeSharingDialog = _this.closeSharingDialog.bind(_this);\n        return _this;\n    }\n\n    _createClass(TranslationDialog, [{\n        key: 'render',\n        value: function render() {\n            return React.createElement(\n                Dialog,\n                _extends({\n                    title: this.i18n.getTranslation('translation_dialog_title'),\n                    autoDetectWindowHeight: true,\n                    autoScrollBodyContent: true\n                }, this.props),\n                React.createElement(this.state.TranslationForm, {\n                    onTranslationSaved: this.translationSaved,\n                    onTranslationError: this.translationError,\n                    onCancel: this.closeSharingDialog,\n                    fieldsToTranslate: this.props.fieldsToTranslate\n                })\n            );\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(newProps) {\n            if (newProps.objectToTranslate) {\n                this.setState({\n                    TranslationForm: getTranslationFormFor(newProps.objectToTranslate)\n                });\n            }\n        }\n    }, {\n        key: 'closeSharingDialog',\n        value: function closeSharingDialog() {\n            this.props.onRequestClose();\n        }\n    }, {\n        key: 'translationSaved',\n        value: function translationSaved() {\n            this.props.onTranslationSaved();\n            this.closeSharingDialog();\n        }\n    }, {\n        key: 'translationError',\n        value: function translationError() {\n            this.props.onTranslationError();\n        }\n    }]);\n\n    return TranslationDialog;\n}(Component);\n\nexport default TranslationDialog;\n\n\nTranslationDialog.propTypes = {\n    objectToTranslate: React.PropTypes.shape({\n        id: React.PropTypes.string.isRequired\n    }).isRequired,\n    onTranslationSaved: React.PropTypes.func.isRequired,\n    onTranslationError: React.PropTypes.func.isRequired,\n    open: React.PropTypes.bool,\n    onRequestClose: React.PropTypes.func.isRequired,\n    fieldsToTranslate: React.PropTypes.array\n};\n\nTranslationDialog.contextTypes = {\n    d2: PropTypes.object\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/d2-ui/lib/i18n/TranslationDialog.component.js\n// module id = 1360\n// module chunks = 2 3 4 7 8","import React from 'react';\nimport TextField from 'material-ui/TextField/TextField';\nimport Translate from '../i18n/Translate.mixin';\nimport LocaleSelector from '../i18n/LocaleSelector.component';\nimport { getLocales, getTranslationsForModel, saveTranslations } from './translationForm.actions';\nimport camelCaseToUnderscores from 'd2-utilizr/lib/camelCaseToUnderscores';\nimport withStateFrom from '../component-helpers/withStateFrom';\nimport RaisedButton from 'material-ui/RaisedButton/RaisedButton';\nimport { Observable } from 'rxjs';\nimport Store from '../store/Store';\nimport CircularProgress from '../circular-progress/CircularProgress';\n\nfunction getTranslationFormData(model) {\n    var translationStore = Store.create();\n\n    getTranslationsForModel(model).subscribe(function (translations) {\n        translationStore.setState(translations);\n    });\n\n    return Observable.combineLatest(getLocales(), translationStore, function () {\n        for (var _len = arguments.length, data = Array(_len), _key = 0; _key < _len; _key++) {\n            data[_key] = arguments[_key];\n        }\n\n        return Object.assign.apply(Object, [{\n            objectToTranslate: model,\n            setTranslations: function setTranslations(translations) {\n                translationStore.setState({\n                    translations: translations\n                });\n            }\n        }].concat(data));\n    });\n}\n\nvar TranslationForm = React.createClass({\n    displayName: 'TranslationForm',\n\n    propTypes: {\n        onTranslationSaved: React.PropTypes.func.isRequired,\n        onTranslationError: React.PropTypes.func.isRequired,\n        objectToTranslate: React.PropTypes.shape({\n            id: React.PropTypes.string.isRequired\n        }),\n        fieldsToTranslate: React.PropTypes.arrayOf(React.PropTypes.string)\n    },\n\n    mixins: [Translate],\n\n    getInitialState: function getInitialState() {\n        return {\n            loading: true,\n            translations: {},\n            translationValues: {},\n            currentSelectedLocale: ''\n        };\n    },\n    getDefaultProps: function getDefaultProps() {\n        return {\n            fieldsToTranslate: ['name', 'shortName', 'description']\n        };\n    },\n    getLoadingdataElement: function getLoadingdataElement() {\n        return React.createElement(\n            'div',\n            { style: { textAlign: 'center' } },\n            React.createElement(CircularProgress, { mode: 'indeterminate' })\n        );\n    },\n    renderFieldsToTranslate: function renderFieldsToTranslate() {\n        var _this = this;\n\n        return this.props.fieldsToTranslate.filter(function (fieldName) {\n            return fieldName;\n        }).map(function (fieldName) {\n            return React.createElement(\n                'div',\n                { key: fieldName },\n                React.createElement(TextField, { floatingLabelText: _this.getTranslation(camelCaseToUnderscores(fieldName)),\n                    value: _this.getTranslationValueFor(fieldName),\n                    fullWidth: true,\n                    onChange: _this._setValue.bind(_this, fieldName)\n                }),\n                React.createElement(\n                    'div',\n                    null,\n                    _this.props.objectToTranslate[fieldName]\n                )\n            );\n        });\n    },\n    renderForm: function renderForm() {\n        return React.createElement(\n            'div',\n            null,\n            this.renderFieldsToTranslate(),\n            React.createElement(RaisedButton, {\n                label: this.getTranslation('save'),\n                primary: true,\n                onClick: this._saveTranslations\n            }),\n            React.createElement(RaisedButton, {\n                style: { marginLeft: '1rem' },\n                label: this.getTranslation('cancel'),\n                onClick: this.props.onCancel\n            })\n        );\n    },\n    renderHelpText: function renderHelpText() {\n        return React.createElement(\n            'div',\n            null,\n            React.createElement(\n                'p',\n                null,\n                this.getTranslation('select_a_locale_to_enter_translations_for_that_language')\n            )\n        );\n    },\n    render: function render() {\n        if (!this.props.locales && !this.props.translations) {\n            return this.getLoadingdataElement();\n        }\n\n        return React.createElement(\n            'div',\n            { style: { minHeight: 250 } },\n            React.createElement(LocaleSelector, { locales: this.props.locales, onChange: this.setCurrentLocale }),\n            Boolean(this.state.currentSelectedLocale) ? this.renderForm() : this.renderHelpText()\n        );\n    },\n    getTranslationValueFor: function getTranslationValueFor(fieldName) {\n        var _this2 = this;\n\n        var translation = this.props.translations.find(function (t) {\n            return t.locale === _this2.state.currentSelectedLocale && t.property.toLowerCase() === camelCaseToUnderscores(fieldName);\n        });\n\n        if (translation) {\n            return translation.value;\n        }\n    },\n    setCurrentLocale: function setCurrentLocale(locale) {\n        this.setState({\n            currentSelectedLocale: locale\n        });\n    },\n    _setValue: function _setValue(property, event) {\n        var _this3 = this;\n\n        var newTranslations = [].concat(this.props.translations);\n        var translation = newTranslations.find(function (t) {\n            return t.locale === _this3.state.currentSelectedLocale && t.property.toLowerCase() === camelCaseToUnderscores(property);\n        });\n\n        if (translation) {\n            if (event.target.value) {\n                translation.value = event.target.value;\n            } else {\n                // Remove translation from the array\n                newTranslations = newTranslations.filter(function (t) {\n                    return t !== translation;\n                });\n            }\n        } else {\n            translation = {\n                property: camelCaseToUnderscores(property).toUpperCase(),\n                locale: this.state.currentSelectedLocale,\n                value: event.target.value\n            };\n\n            newTranslations.push(translation);\n        }\n\n        this.props.setTranslations(newTranslations);\n    },\n    _saveTranslations: function _saveTranslations() {\n        saveTranslations(this.props.objectToTranslate, this.props.translations).subscribe(this.props.onTranslationSaved, this.props.onTranslationError);\n    }\n});\n\nexport default TranslationForm;\n\nexport function getTranslationFormFor(model) {\n    return withStateFrom(getTranslationFormData(model), TranslationForm);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/d2-ui/lib/i18n/TranslationForm.component.js\n// module id = 1361\n// module chunks = 2 3 4 7 8","var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nimport Action from '../action/Action';\nimport { getInstance as getD2 } from 'd2/lib/d2';\nimport { Observable } from 'rxjs';\nimport { getInstance } from 'd2/lib/d2';\n\nexport function getLocales() {\n    if (!getLocales.localePromise) {\n        getLocales.localePromise = getD2().then(function (d2) {\n            var api = d2.Api.getApi();\n\n            return api.get('locales/db');\n        }).then(function (locales) {\n            return {\n                locales: locales\n            };\n        });\n    }\n\n    return Observable.fromPromise(getLocales.localePromise);\n}\n\nfunction getModelHref(model) {\n    if (model.href) {\n        return model.href;\n    }\n\n    return model.modelDefinition.apiEndpoint + '/' + model.id;\n}\n\nexport function getTranslationsForModel(model) {\n    return Observable.of(model).flatMap(function (model) {\n        var modelDefinition = model.modelDefinition;\n\n        if (!modelDefinition && !modelDefinition.name) {\n            return Promise.reject(new Error('Can not find modelDefinition for ' + model.id));\n        }\n\n        return getInstance().then(function (d2) {\n            var api = d2.Api.getApi();\n\n            return api.get(getModelHref(model) + '/translations');\n        });\n    });\n}\n\nexport var saveTranslations = Action.create('saveTranslations');\n\nsaveTranslations.subscribe(function (_ref) {\n    var _ref$data = _slicedToArray(_ref.data, 2),\n        model = _ref$data[0],\n        translations = _ref$data[1],\n        complete = _ref.complete,\n        error = _ref.error;\n\n    var translationHref = getModelHref(model) + '/translations';\n\n    getInstance().then(function (d2) {\n        var api = d2.Api.getApi();\n\n        api.update(translationHref, { translations: translations }, { dataType: 'text' }).then(complete).catch(error);\n    });\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/d2-ui/lib/i18n/translationForm.actions.js\n// module id = 1362\n// module chunks = 2 3 4 7 8","import React from 'react';\nimport log from 'loglevel';\n\nimport Dialog from 'material-ui/Dialog/Dialog';\nimport FlatButton from 'material-ui/FlatButton/FlatButton';\nimport RaisedButton from 'material-ui/RaisedButton/RaisedButton';\nimport Checkbox from 'material-ui/Checkbox/Checkbox';\nimport DropDown from '../forms/form-fields/drop-down';\n\nimport snackActions from '../Snackbar/snack.actions';\n\nimport modelToEditStore from './modelToEditStore';\n\n\nconst styles = {\n    dialogContent: {\n        maxWidth: 'none',\n    },\n    dialogDiv: {\n        overflowX: 'auto',\n        overflowY: 'hidden',\n    },\n    table: {\n        borderSpacing: 0,\n        borderCollapse: 'collapse',\n        margin: '32px auto',\n    },\n    th: {\n        whiteSpace: 'nowrap',\n        textAlign: 'center',\n        border: '1px solid #e0e0e0',\n        padding: 6,\n    },\n    thDataElements: {\n        whiteSpace: 'nowrap',\n        border: '1px solid #e0e0e0',\n        background: '#f0f0f0',\n        textAlign: 'left',\n        padding: 6,\n    },\n    td: {\n        whiteSpace: 'nowrap',\n        padding: 2,\n        border: '1px solid #e0e0e0',\n        minWidth: 105,\n    },\n    tdDataElement: {\n        whiteSpace: 'nowrap',\n        padding: 6,\n        border: '1px solid #e0e0e0',\n    },\n};\n\nclass GreyFieldDialog extends React.Component {\n    constructor(props, context) {\n        super(props, context);\n\n        this.state = {\n            categories: [],\n        };\n\n        this.closeDialog = this.closeDialog.bind(this);\n        this.handleSaveClick = this.handleSaveClick.bind(this);\n\n        this.getTranslation = context.d2.i18n.getTranslation.bind(context.d2.i18n);\n    }\n\n    componentWillReceiveProps(props) {\n        const d2 = this.context.d2;\n\n        if (props.sectionModel) {\n            const dataElements = props.sectionModel.dataElements.toArray();\n            if (dataElements.length < 1) {\n                log.info(`Section ${props.sectionModel.displayName} contains no data elements`);\n                snackActions.show({ message: this.getTranslation('this_section_has_no_data_elements'), action: 'ok' });\n                this.props.onRequestClose();\n                return;\n            }\n\n            let cocMap = {};\n\n            const categoryArrayToMap = (categories) => {\n                let appendage = null;\n\n                const reduceAppendage = (prev, categoryOption) => {\n                    const out = prev;\n                    out[categoryOption.id] = appendage;\n                    return out;\n                };\n\n                while (categories.length > 0) {\n                    appendage = categories.pop().categoryOptions.toArray().reduce(reduceAppendage, {});\n                }\n                return appendage;\n            };\n\n            const assignCocs = (cocMap, options, coc) => {\n                if (options.length > 0) {\n                    return Object.keys(cocMap).reduce((prev, key) => {\n                        const out = prev;\n                        const keyPos = options.indexOf(key);\n                        if (keyPos !== -1) {\n                            options.splice(keyPos, 1);\n                            out[key] = assignCocs(cocMap[key], options, coc);\n                            return out;\n                        }\n                        out[key] = cocMap[key];\n                        return out;\n                    }, {});\n                }\n                return coc;\n            };\n\n            // Use the categoryCombos associated with the section to get categories and their category options\n            d2.models.categoryCombos.list({\n                filter: `id:in:[${props.sectionModel.categoryCombos.toArray().map(coc => coc.id)}]`,\n                paging: false,\n                fields: [\n                    'id,displayName',\n                    'categories[id,displayName,categoryOptions[id,displayName]]',\n                    'categoryOptionCombos[id,displayName',\n                    'categoryOptions[id,displayName]]',\n                ].join(','),\n            })\n            .then(categoryCombos => {\n                categoryCombos.forEach(categoryCombo => {\n                    // Build a nested map of categories:\n                    // { cat1_opt1 : { cat2_opt1: { cat3_opt1: null, cat3_opt2: null }, cat2_opt2: {...}, ... }, ... }\n                    //\n                    // Then convert to JSON and back as a fast way to remove any references within the structure\n                    Object.assign(\n                        cocMap,\n                        JSON.parse(JSON.stringify(categoryArrayToMap(categoryCombo.categories.toArray())))\n                    );\n\n                    // Fill in the leaf nodes in the cocMap with the actual coc's\n                    categoryCombo.categoryOptionCombos.toArray().forEach(coc => {\n                        const optionPath = coc.categoryOptions.toArray().map(o => o.id);\n                        cocMap = assignCocs(cocMap, optionPath, { id: coc.id, displayName: coc.displayName });\n                    });\n                });\n\n                const greyedFields = props.sectionModel.greyedFields.reduce((prev, gf) => {\n                    if (prev.hasOwnProperty(gf.dataElement.id)) {\n                        prev[gf.dataElement.id].push(gf.categoryOptionCombo.id);\n                        return prev;\n                    }\n\n                    const out = prev;\n                    out[gf.dataElement.id] = [gf.categoryOptionCombo.id];\n                    return out;\n                }, {});\n\n                this.setState({\n                    currentCategoryCombo: categoryCombos.toArray()[0].id,\n                    categoryCombos,\n                    optionCount: categoryCombos.toArray()\n                        .reduce((oc, cc) => {\n                            oc[cc.id] = cc.categories.toArray().map(c => c.categoryOptions.size);\n                            return oc;\n                        }, {}),\n                    cocMap,\n                    greyedFields,\n                });\n\n            });\n        }\n    }\n\n    closeDialog() {\n        this.props.onRequestClose();\n    }\n\n    handleSaveClick() {\n        const greyedFields = [];\n        Object.keys(this.state.greyedFields).forEach(dataElement => {\n            this.state.greyedFields[dataElement].forEach(coc => {\n                greyedFields.push({\n                    dataElement: { id: dataElement },\n                    categoryOptionCombo: { id: coc },\n                });\n            });\n        });\n\n        const section = Object.assign(this.props.sectionModel, { greyedFields });\n\n        section\n            .save()\n            .then(res => {\n                log.info('Section updated', res);\n                snackActions.show({ message: this.getTranslation('section_saved') });\n                this.props.onRequestSave(section);\n            })\n            .catch(err => {\n                log.error('Failed to save section:', err);\n                snackActions.show({ message: this.getTranslation('failed_to_save_section'), action: 'ok' });\n            });\n    }\n\n    renderTableHeader() {\n        let prevRowColCount = 1;\n\n        return this.state.currentCategoryCombo && (\n            this.state.categoryCombos.get(this.state.currentCategoryCombo).categories.toArray().map((cat, catNum) => {\n                const colSpan = this.state.optionCount[this.state.currentCategoryCombo]\n                    .slice(catNum + 1)\n                    .reduce((product, optionCount) => optionCount * product, 1);\n\n                const isLastHeader = catNum === this.state.categoryCombos.get(this.state.currentCategoryCombo).categories.size - 1;\n                const row = (\n                    <tr key={catNum}>\n                        <th style={styles.thDataElements}>{isLastHeader && this.getTranslation('data_element')}</th>\n                        {\n                            // For each column in the previous row...\n                            Array.apply(null, Array(prevRowColCount)).map((e, rep) => {\n                                // ... render the columns for this row\n                                return cat.categoryOptions.toArray().map((opt, optNum) => {\n                                    return (\n                                        <th key={`${optNum}.${rep}`}\n                                            colSpan={colSpan}\n                                            style={styles.th}\n                                        >{opt.displayName === 'default' ? '' : opt.displayName}</th>\n                                    );\n                                });\n                            })\n                        }\n                    </tr>\n                );\n                prevRowColCount *= cat.categoryOptions.size;\n                return row;\n            })\n        );\n    }\n\n    renderCheckbox(dataElement, fieldArray, fieldNum) {\n        const resolveCoc = (cocMap, fields) => {\n            if (fields.length === 0) {\n                return cocMap;\n            }\n\n            const field = fields.shift();\n            return resolveCoc(cocMap[field], fields);\n        };\n\n        const coc = resolveCoc(this.state.cocMap, fieldArray);\n\n        const isGreyed =\n            this.state.greyedFields.hasOwnProperty(dataElement.id) &&\n            this.state.greyedFields[dataElement.id].indexOf(coc.id) !== -1;\n\n        const toggleBoggle = ((dataElementId, categoryOptionComboId, event, disable) => {\n            this.setState(state => {\n                const greyedCocs = (state.greyedFields[dataElementId] || []).slice();\n                if (disable) {\n                    if (greyedCocs.includes(categoryOptionComboId)) {\n                        greyedCocs.splice(greyedCocs.indexOf(categoryOptionComboId), 1);\n                    }\n                } else {\n                    if (!greyedCocs.includes(categoryOptionComboId)) {\n                        greyedCocs.push(categoryOptionComboId);\n                    }\n                }\n\n                const greyedFields = Object.keys(state.greyedFields)\n                    .reduce((prev, deId) => {\n                        const out = prev;\n                        out[deId] = deId === dataElementId ? greyedCocs : state.greyedFields[deId];\n                        return out;\n                    }, {});\n\n                if (greyedCocs.length > 0 && !greyedFields.hasOwnProperty(dataElementId)) {\n                    greyedFields[dataElementId] = greyedCocs;\n                }\n\n                return { greyedFields };\n            });\n        }).bind(this, dataElement.id, coc.id);\n\n        return (\n            <td key={fieldNum} style={styles.td}>\n                <Checkbox\n                    checked={!isGreyed}\n                    label={isGreyed ? this.getTranslation('disabled') : this.getTranslation('enabled')}\n                    labelPosition=\"right\"\n                    labelStyle={{ whiteSpace: 'nowrap' }}\n                    onCheck={toggleBoggle}\n                />\n            </td>\n        );\n    }\n\n    renderDataElements() {\n        const getCocFields = () => {\n            return this.state.categoryCombos.get(this.state.currentCategoryCombo).categories\n                .toArray()\n                .reduce((prev, cat) => {\n                    if (prev.length > 0) {\n                        const out = [];\n                        prev.forEach(p => {\n                            cat.categoryOptions.toArray().forEach(opt => {\n                                const pout = p.slice();\n                                pout.push(opt.id);\n                                out.push(pout);\n                            });\n                        });\n                        return out;\n                    }\n\n                    cat.categoryOptions.toArray().forEach(opt => {\n                        prev.push([opt.id]);\n                    });\n                    return prev;\n                }, []);\n        };\n\n        const currentSectionDataElementIds = this.props.sectionModel.dataElements.toArray().map(de => de.id);\n        return this.state.currentCategoryCombo ?\n            modelToEditStore.state.dataSetElements\n                .filter(dse => currentSectionDataElementIds.includes(dse.dataElement.id))\n                .filter(dse => (dse.categoryCombo ? dse.categoryCombo.id : dse.dataElement.categoryCombo.id) === this.state.currentCategoryCombo)\n                .sort((a, b) => currentSectionDataElementIds.indexOf(a.dataElement.id) - currentSectionDataElementIds.indexOf(b.dataElement.id))\n                .map((dse, deNum) => {\n                    const cocFields = getCocFields();\n                    return (\n                        <tr key={deNum} style={{ background: deNum % 2 === 0 ? 'none' : '#f0f0f0' }}>\n                            <td style={styles.tdDataElement}>{dse.dataElement.displayName}</td>\n                            {cocFields.map((fields, fieldNum) => this.renderCheckbox(dse.dataElement, fields, fieldNum))}\n                        </tr>\n                    );\n                }) : null;\n    }\n\n    render() {\n        const title = this.props.sectionModel.displayName;\n        const {\n            open,\n            ...extraProps,\n        } = this.props;\n\n        let uniqueCatComboIds = [], sectionDataElementIds = [], categoryCombosForSection = [];\n\n        if (this.props.sectionModel) {\n            // Get data element ids for the current section\n            sectionDataElementIds = this.props.sectionModel.dataElements.toArray().map(de => de.id);\n\n            // Get unique cat combos for data elements in current section\n            categoryCombosForSection = modelToEditStore.state.dataSetElements\n                .filter(dse => sectionDataElementIds.includes(dse.dataElement.id))\n                .map(dse => dse.categoryCombo || dse.dataElement.categoryCombo)\n                .reduce((catCombos, catCombo) => {\n                    if (!uniqueCatComboIds.includes(catCombo.id)) {\n                        uniqueCatComboIds.push(catCombo.id);\n                        catCombos.push(catCombo);\n                    }\n                    return catCombos;\n                }, [])\n                .sort((a, b) => a.displayName.localeCompare(b.displayName));\n        }\n\n        return (\n            <Dialog\n                autoScrollBodyContent\n                autoDetectWindowHeight\n                title={`${this.getTranslation('manage_grey_fields')}: ${title}`}\n                style={{ maxWidth: 'none' }}\n                contentStyle={styles.dialogContent}\n                open={open && this.props.sectionModel.dataElements.size > 0}\n                {...extraProps}\n                actions={[\n                    <FlatButton\n                        label={this.getTranslation('cancel')}\n                        onTouchTap={this.closeDialog}\n                        style={{ marginRight: 16 }}\n                    />,\n                    <RaisedButton\n                        primary\n                        label={this.getTranslation('save')}\n                        onTouchTap={this.handleSaveClick}\n                    />,\n                ]}\n                onRequestClose={this.closeDialog}\n            >\n                {this.props.sectionModel && this.props.sectionModel.categoryCombos && this.props.sectionModel.categoryCombos.size > 1 ? (\n                <DropDown\n                    options={categoryCombosForSection.map(cc => ({\n                            value: cc.id,\n                            text: cc.displayName === 'default' ? this.getTranslation('none') : cc.displayName\n                        }))}\n                    labelText={this.getTranslation('category_combo')}\n                    value={this.state.currentCategoryCombo}\n                    onChange={e => this.setState({\n                        currentCategoryCombo: e.target.value,\n                    })}\n                    style={{ width: '33%' }}\n                    isRequired\n                />\n                ) : null}\n                <div style={styles.dialogDiv}>\n                    <table style={styles.table}>\n                        <tbody>\n                        {this.renderTableHeader()}\n                        {this.state.currentCategoryCombo && this.props.sectionModel && this.renderDataElements()}\n                        </tbody>\n                    </table>\n                </div>\n            </Dialog>\n        );\n    }\n}\n\nGreyFieldDialog.contextTypes = { d2: React.PropTypes.any.isRequired };\nGreyFieldDialog.propTypes = {\n    open: React.PropTypes.bool.isRequired,\n    sectionModel: React.PropTypes.any.isRequired,\n    onRequestClose: React.PropTypes.func.isRequired,\n    onRequestSave: React.PropTypes.func.isRequired,\n};\n\nexport default GreyFieldDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/GreyFieldDialog.component.js","import React from 'react';\nimport log from 'loglevel';\n\nimport Dialog from 'material-ui/Dialog/Dialog';\nimport FlatButton from 'material-ui/FlatButton/FlatButton';\nimport RaisedButton from 'material-ui/RaisedButton/RaisedButton';\nimport TextField from 'material-ui/TextField/TextField';\nimport GroupEditor from 'd2-ui/lib/group-editor/GroupEditorWithOrdering.component';\nimport Store from 'd2-ui/lib/store/Store';\nimport Checkbox from 'material-ui/Checkbox';\n\nimport DropDown from '../forms/form-fields/drop-down';\nimport snackActions from '../Snackbar/snack.actions';\n\nimport modelToEditStore from './modelToEditStore';\nconst dataElementStore = Store.create();\nconst assignedDataElementStore = Store.create();\nconst indicatorStore = Store.create();\nconst assignedIndicatorStore = Store.create();\n\n\nclass SectionDialog extends React.Component {\n    constructor(props, context) {\n        super(props, context);\n\n        this.state = {\n            categoryCombo: false,\n        };\n        dataElementStore.setState([]);\n        assignedDataElementStore.setState([]);\n        indicatorStore.setState([]);\n        assignedIndicatorStore.setState([]);\n\n        this.handleCategoryComboChange = this.handleCategoryComboChange.bind(this);\n        this.handleFilterChange = this.handleFilterChange.bind(this);\n        this.handleNameChange = this.handleNameChange.bind(this);\n        this.handleCodeChange = this.handleCodeChange.bind(this);\n        this.handleDescriptionChange = this.handleDescriptionChange.bind(this);\n        this.assignDataElements = this.assignDataElements.bind(this);\n        this.removeDataElements = this.removeDataElements.bind(this);\n        this.setAssignedDataElements = this.setAssignedDataElements.bind(this);\n        this.assignIndicators = this.assignIndicators.bind(this);\n        this.removeIndicators = this.removeIndicators.bind(this);\n        this.setAssignedIndicators = this.setAssignedIndicators.bind(this);\n        this.saveSection = this.saveSection.bind(this);\n\n        this.handleRowTotalsChange = (e, value) => { this.setState({ showRowTotals: value }); };\n        this.handleColumnTotalsChange = (e, value) => { this.setState({ showColumnTotals: value }); };\n\n        this.getTranslation = context.d2.i18n.getTranslation.bind(context.d2.i18n);\n    }\n\n    componentDidMount() {\n        this.subscriptions = [];\n        this.subscriptions.push(assignedDataElementStore.subscribe(() => {\n            this.forceUpdate();\n        }));\n    }\n\n    componentWillReceiveProps(props) {\n        if (props.sectionModel) {\n            const currentSectionId = props.sectionModel.id;\n            const sections = modelToEditStore.state.sections;\n            const sectionArray = Array.isArray(sections) ? sections : sections.toArray();\n            const otherSections = sectionArray.filter(s => s.id !== currentSectionId);\n            const filterDataElementIds = otherSections\n                .reduce((elements, section) => {\n                return elements.concat((Array.isArray(section.dataElements)\n                        ? section.dataElements\n                        : section.dataElements.toArray()\n                ).map(de => de.id));\n            }, []);\n\n            // Default category combo filter = no filter\n            const categoryComboId = false;\n\n            assignedDataElementStore.setState(\n                props.sectionModel.dataElements && props.sectionModel.dataElements.toArray().map(de => de.id) || []\n            );\n\n            indicatorStore.setState(\n                modelToEditStore.state.indicators\n                    .toArray()\n                    .map(i => ({ value: i.id, text: i.displayName }))\n                    .sort((a, b) => a.text.localeCompare(b.text))\n            );\n            assignedIndicatorStore.setState(\n                props.sectionModel.indicators && props.sectionModel.indicators.toArray().map(i => i.id) || []\n            );\n\n            this.setState({\n                name: props.sectionModel.name,\n                code: props.sectionModel.code,\n                nameError: '',\n                codeError: '',\n                description: props.sectionModel.description,\n                showRowTotals: props.sectionModel.showRowTotals,\n                showColumnTotals: props.sectionModel.showColumnTotals,\n                filterText: '',\n                filterDataElementIds,\n            }, () => {\n                this.handleCategoryComboChange({ target: { value: categoryComboId } });\n                this.forceUpdate();\n            });\n        }\n    }\n\n    componentWillUnmount() {\n        this.subscriptions.forEach(disposable => disposable.unsubscribe());\n    }\n\n    handleCategoryComboChange(event) {\n        const categoryComboId = event.target.value;\n\n        if (modelToEditStore.state.dataSetElements) {\n            dataElementStore.setState(\n                modelToEditStore.state.dataSetElements\n                    .filter(dse => {\n                        if (categoryComboId) {\n                            return dse.categoryCombo\n                                ? dse.categoryCombo.id === categoryComboId\n                                : dse.dataElement.categoryCombo.id === categoryComboId;\n                        }\n                        return true;\n                    })\n                    .filter(dse => this.state.filterDataElementIds\n                        ? !this.state.filterDataElementIds.includes(dse.dataElement.id)\n                        : true\n                    )\n                    .map(dse => ({ value: dse.dataElement.id, text: dse.dataElement.displayName }))\n                    .sort((a, b) => a.text.localeCompare(b.text))\n            );\n        }\n\n        this.setState({\n            categoryCombo: categoryComboId,\n        });\n    }\n\n    handleFilterChange(e) {\n        this.setState({ filterText: e.target.value });\n    }\n\n    handleNameChange(e) {\n        const sectionArray = Array.isArray(modelToEditStore.getState().sections)\n            ? modelToEditStore.getState().sections\n            : modelToEditStore.getState().sections.toArray();\n        const nameDupe = sectionArray\n            .filter(s => s.id !== this.props.sectionModel.id)\n            .reduce((res, s) => res || s.name === e.target.value, false);\n\n        this.setState({ name: e.target.value, nameError: nameDupe ? this.getTranslation('value_not_unique') : '' });\n    }\n\n    handleCodeChange(e) {\n        const sectionArray = Array.isArray(modelToEditStore.getState().sections)\n            ? modelToEditStore.getState().sections\n            : modelToEditStore.getState().sections.toArray();\n        const codeDupe = sectionArray\n            .filter(s => s.id !== this.props.sectionModel.id)\n            .reduce((res, s) => res || (s.code && s.code === e.target.value), false);\n\n        this.setState({ code: e.target.value, codeError: codeDupe ? this.getTranslation('value_not_unique') : '' });\n    }\n\n    handleDescriptionChange(e) {\n        this.setState({ description: e.target.value });\n    }\n\n    assignDataElements(dataElements) {\n        assignedDataElementStore.setState(assignedDataElementStore.state.concat(dataElements));\n        return Promise.resolve();\n    }\n\n    removeDataElements(dataElements) {\n        assignedDataElementStore.setState(assignedDataElementStore.state.filter(de => dataElements.indexOf(de) === -1));\n        return Promise.resolve();\n    }\n\n    setAssignedDataElements(dataElements) {\n        assignedDataElementStore.setState(dataElements);\n    }\n\n    assignIndicators(indicators) {\n        assignedIndicatorStore.setState(assignedIndicatorStore.state.concat(indicators));\n        return Promise.resolve();\n    }\n\n    removeIndicators(indicators) {\n        assignedIndicatorStore.setState(assignedIndicatorStore.state.filter(i => indicators.indexOf(i) === -1));\n        return Promise.resolve();\n    }\n\n    setAssignedIndicators(indicators) {\n        assignedIndicatorStore.setState(indicators);\n    }\n\n    saveSection() {\n        if (!this.state.name || this.state.name.trim().length === 0) {\n            snackActions.show({\n                message: this.getTranslation('name_is_required'),\n                action: this.getTranslation('ok'),\n            });\n            return;\n        }\n\n        const sectionModel = this.props.sectionModel.id\n            ? this.props.sectionModel\n            : this.props.sectionModel.modelDefinition.create();\n        Object.assign(sectionModel, {\n            dataSet: { id: modelToEditStore.state.id },\n            name: this.state.name,\n            code: this.state.code,\n            description: this.state.description,\n            showRowTotals: this.state.showRowTotals,\n            showColumnTotals: this.state.showColumnTotals,\n            dataElements: assignedDataElementStore.state.map(de => ({ id: de })),\n            indicators: assignedIndicatorStore.state.map(i => ({ id: i })),\n            sortOrder: this.props.sectionModel.sortOrder || modelToEditStore\n                .state\n                .sections\n                .toArray()\n                .reduce((prev, s) => Math.max(prev, s.sortOrder + 1), 0),\n        });\n        sectionModel.save()\n            .then((res) => {\n                snackActions.show({ message: this.getTranslation('section_saved') });\n                this.context.d2.models.sections.get(res.response.uid, {\n                    fields: [\n                        ':all,dataElements[id,categoryCombo[id,displayName]]',\n                        'greyedFields[categoryOptionCombo,dataElement]',\n                    ].join(','),\n                })\n                    .then(section => {\n                        this.props.onSaveSection(section);\n                    });\n            })\n            .catch(err => {\n                log.warn('Failed to save section:', err);\n                snackActions.show({\n                    message: this.getTranslation('failed_to_save_section'),\n                    action: this.getTranslation('ok'),\n                });\n            });\n    }\n\n    renderFilters() {\n        const catCombos = [{ value: false, text: this.getTranslation('no_filter') }]\n            .concat(this.props.categoryCombos.sort((a, b) => a.text.localeCompare(b.text)));\n\n        return (\n            <div style={{ minWidth: 605 }}>\n                <DropDown\n                    options={catCombos}\n                    labelText={this.getTranslation('category_combo_filter')}\n                    onChange={this.handleCategoryComboChange}\n                    value={this.state.categoryCombo}\n                    isRequired\n                    disabled={this.props.categoryCombos.length === 1}\n                    style={{ width: 284 }}\n                />\n                <TextField\n                    floatingLabelText={this.getTranslation('filter')}\n                    onChange={this.handleFilterChange}\n                    style={{ float: 'right', marginRight: 34, width: 284 }}\n                />\n            </div>\n        );\n    }\n\n    renderAvailableOptions() {\n        const labelStyle = {\n            position: 'relative',\n            display: 'block',\n            width: '100%',\n            lineHeight: '24px',\n            color: 'rgba(0,0,0,0.3)',\n            marginTop: '1.25rem',\n            fontSize: 16,\n        };\n\n        return (\n            <div>\n                <div style={{ marginBottom: 80 }}>\n                    <label style={labelStyle}>{this.getTranslation('data_elements')}</label>\n                    <GroupEditor\n                        itemStore={dataElementStore}\n                        assignedItemStore={assignedDataElementStore}\n                        onAssignItems={this.assignDataElements}\n                        onRemoveItems={this.removeDataElements}\n                        onOrderChanged={this.setAssignedDataElements}\n                        height={250}\n                        filterText={this.state.filterText}\n                    />\n                </div>\n                {indicatorStore.state.length ? (\n                    <div style={{ marginBottom: 80 }}>\n                        <label style={labelStyle}>{this.getTranslation('indicators')}</label>\n                        <GroupEditor\n                            itemStore={indicatorStore}\n                            assignedItemStore={assignedIndicatorStore}\n                            onAssignItems={this.assignIndicators}\n                            onRemoveItems={this.removeIndicators}\n                            onOrderChanged={this.setAssignedIndicators}\n                            height={250}\n                            filterText={this.state.filterText}\n                        />\n                    </div>\n                ) : null}\n            </div>\n        );\n    }\n\n    render() {\n        let title = this.getTranslation('add_section');\n        let sectionIdDiv = null;\n\n        if (this.props.sectionModel.id) {\n            title = this.getTranslation('edit_section');\n            sectionIdDiv = (\n                <div style={{float: 'left', padding: 8, color: 'rgba(0,0,0,0.5)'}}>\n                    {this.getTranslation('section_id')}:\n                    <span style={{fontFamily: 'monospace'}}>{this.props.sectionModel.id}</span>\n                </div>\n            );\n        }\n\n        const validateName = (e) => {\n            this.setState({ nameError: e.target.value.trim().length > 0 ? '' : this.getTranslation('value_required') });\n        };\n\n        return (\n            <Dialog\n                autoScrollBodyContent\n                title={title}\n                actions={[\n                    sectionIdDiv,\n                    <FlatButton\n                        label={this.getTranslation('cancel')}\n                        onTouchTap={this.props.onRequestClose}\n                        style={{ marginRight: 24 }}\n                    />,\n                    <RaisedButton\n                        primary\n                        label={this.getTranslation('save')}\n                        onTouchTap={this.saveSection}\n                    />,\n                ]}\n                {...this.props}\n            >\n                <TextField\n                    floatingLabelText={`${this.getTranslation('name')} *`}\n                    value={this.state.name || ''}\n                    style={{ width: '100%' }}\n                    onChange={this.handleNameChange}\n                    errorText={this.state.nameError}\n                    onBlur={validateName}\n                />\n                <TextField\n                    floatingLabelText={this.getTranslation('code')}\n                    value={this.state.code || ''}\n                    style={{ width: '100%' }}\n                    onChange={this.handleCodeChange}\n                    errorText={this.state.codeError}\n                />\n                <TextField\n                    floatingLabelText={this.getTranslation('description')}\n                    value={this.state.description || ''}\n                    style={{ width: '100%' }}\n                    multiLine\n                    onChange={this.handleDescriptionChange}\n                />\n                <Checkbox\n                    label={this.getTranslation('show_row_totals')}\n                    checked={this.state.showRowTotals}\n                    style={{ margin: '16px 0' }}\n                    onCheck={this.handleRowTotalsChange}\n                />\n                <Checkbox\n                    label={this.getTranslation('show_column_totals')}\n                    checked={this.state.showColumnTotals}\n                    style={{ margin: '16px 0' }}\n                    onCheck={this.handleColumnTotalsChange}\n                />\n                {this.renderFilters()}\n                {this.renderAvailableOptions()}\n            </Dialog>\n        );\n    }\n}\n\nSectionDialog.propTypes = {\n    open: React.PropTypes.bool.isRequired,\n    sectionModel: React.PropTypes.any.isRequired,\n    categoryCombos: React.PropTypes.array.isRequired,\n    onRequestClose: React.PropTypes.func.isRequired,\n    onSaveSection: React.PropTypes.func.isRequired,\n};\nSectionDialog.contextTypes = {\n    d2: React.PropTypes.any.isRequired,\n};\n\nexport default SectionDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/EditModel/SectionDialog.component.js"],"sourceRoot":""}